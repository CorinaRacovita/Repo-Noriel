try{window.performance.mark("shared~vendor~atlassian~ar.js:eval-start")}catch(e){}function e(e,t,r,s){Object.defineProperty(e,t,{get:r,set:s,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var r=globalThis,s={},i={},n=r.parcelRequire94c2;null==n&&(n=function(e){if(e in s)return s[e].exports;if(e in i){var t=i[e];delete i[e];var r={id:e,exports:{}};return s[e]=r,t.call(r.exports,r,r.exports),r.exports}var n=Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n},n.register=function(e,t){i[e]=t},r.parcelRequire94c2=n);var a=n.register;r.lb||(r.lb=new Set,r.bq=[],r.rlb=e=>{r.lb.add(e),r.pq()},r.rwr=(e,t,s)=>{r.bq.push({b:e,r:t,d:s}),r.pq()},r.pq=()=>{var e=r.bq.find(e=>e.d.every(e=>r.lb.has(e)));e&&(r.bq=r.bq.filter(t=>t.b!==e.b),e.r(),r.pq())}),a("dcbVh",function(t,r){e(t.exports,"ELEMENTS_CONTEXT",()=>n("cR7hG").ELEMENTS_CONTEXT),e(t.exports,"FabricElementsAnalyticsContext",()=>n("cR7hG").FabricElementsAnalyticsContext),e(t.exports,"NAVIGATION_CONTEXT",()=>n("5wCOA").NAVIGATION_CONTEXT),e(t.exports,"NavigationAnalyticsContext",()=>n("5wCOA").NavigationAnalyticsContext),e(t.exports,"EDITOR_CONTEXT",()=>n("dlE38").EDITOR_CONTEXT),e(t.exports,"EDITOR_APPEARANCE_CONTEXT",()=>n("dlE38").EDITOR_APPEARANCE_CONTEXT),e(t.exports,"FabricEditorAnalyticsContext",()=>n("dlE38").FabricEditorAnalyticsContext),e(t.exports,"MEDIA_CONTEXT",()=>o),e(t.exports,"PEOPLE_TEAMS_CONTEXT",()=>n("48k2V").PEOPLE_TEAMS_CONTEXT),e(t.exports,"PeopleTeamsAnalyticsContext",()=>n("48k2V").PeopleTeamsAnalyticsContext),e(t.exports,"NOTIFICATIONS_CONTEXT",()=>n("8N29D").NOTIFICATIONS_CONTEXT),e(t.exports,"NotificationsAnalyticsContext",()=>n("8N29D").NotificationsAnalyticsContext),e(t.exports,"RECENT_WORK_CONTEXT",()=>n("gjC6M").RECENT_WORK_CONTEXT),e(t.exports,"RecentWorkAnalyticsContext",()=>n("gjC6M").RecentWorkAnalyticsContext),e(t.exports,"ATLAS_CONTEXT",()=>n("fZ5Cn").ATLAS_CONTEXT),e(t.exports,"LINKING_PLATFORM_CONTEXT",()=>n("hw8rx").LINKING_PLATFORM_CONTEXT),e(t.exports,"POST_OFFICE_CONTEXT",()=>n("cMbrx").POST_OFFICE_CONTEXT),e(t.exports,"AI_MATE_CONTEXT",()=>n("eUjFK").AI_MATE_CONTEXT),n("cR7hG"),n("5wCOA"),n("dlE38"),n("48k2V"),n("8N29D"),n("gjC6M"),n("fZ5Cn"),n("hw8rx"),n("cMbrx"),n("eUjFK")}),a("cR7hG",function(t,r){e(t.exports,"ELEMENTS_CONTEXT",()=>i),e(t.exports,"FabricElementsAnalyticsContext",()=>a);var s=n("hKkEL");let i="fabricElementsCtx",a=(0,s.default)(i,"FabricElementsAnalyticsContext")}),a("hKkEL",function(r,s){e(r.exports,"default",()=>a);var i=n("eUqFw"),a=(e,r="NamespacedContext")=>{let s=r=>{let s={[e]:r.data};return t(i).createElement(n("aw5Sy").default,{data:s},t(i).Children.only(r.children))};return s.displayName=r,s}}),a("aw5Sy",function(r,s){e(r.exports,"default",()=>o);var i=n("eUqFw"),a=n("2fFJv"),o=e=>{let r=null!=a&&a.env?.ANALYTICS_NEXT_MODERN_CONTEXT;return r||(0,n("XHGTv").getBooleanFF)("platform.analytics-next-use-modern-context_fqgbx")?t(i).createElement(n("2BBco").default,e):t(i).createElement(n("8PMUi").default,e)}}),a("XHGTv",function(t,r){function s(e){(0,n("jJ8fN").setBooleanResolver)(e)}function i(e){return(0,n("jJ8fN").resolveBooleanFlag)(e)}e(t.exports,"setBooleanFeatureFlagResolver",()=>s),e(t.exports,"getBooleanFF",()=>i)}),a("jJ8fN",function(t,r){e(t.exports,"setBooleanResolver",()=>u),e(t.exports,"resolveBooleanFlag",()=>d);var s=n("2fFJv");let i="__PLATFORM_FEATURE_FLAGS__",a=void 0!==s&&void 0!==s.env,o=!a&&!1,l={earlyResolvedFlags:new Map,booleanResolver:function(e){return!1}},c="undefined"!=typeof window?window:globalThis;function u(e){c[i].booleanResolver=e}function d(e){if(o)return(0,n("g0bIE").debug)('[%s]: The feature flags were enabled while running tests. The flag "%s" will be always enabled.',"@atlaskit/platform-feature-flags",e),!0;try{let t=c[i]?.booleanResolver(e);if("boolean"!=typeof t)return console.warn(`${e} resolved to a non-boolean value, returning false for safety`),!1;return t}catch(e){return!1}}c[i]=c[i]||l}),a("g0bIE",function(t,r){e(t.exports,"debug",()=>n);let s=(globalThis?.process?.env?.JEST_WORKER_ID!==void 0)??!1,i=!s&&globalThis?.process?.env?.NODE_ENV!=="production",n=(...e)=>{i&&console.debug(...e)}}),a("8PMUi",function(r,s){e(r.exports,"default",()=>c);var i=n("eUqFw");let a={getAtlaskitAnalyticsContext:t(n("1Qivz")).func,getAtlaskitAnalyticsEventHandlers:t(n("1Qivz")).func},o=()=>[];class l extends i.Component{static{this.contextTypes=a}static{this.childContextTypes=a}constructor(e){super(e),this.getChildContext=()=>({getAtlaskitAnalyticsContext:this.getAnalyticsContext}),this.getAnalyticsContext=()=>{let{data:e}=this.props,{getAtlaskitAnalyticsContext:t=o}=this.context;return[...t(),e]},this.getAnalyticsEventHandlers=()=>{let{getAtlaskitAnalyticsEventHandlers:e=o}=this.context;return e()},this.contextValue={getAtlaskitAnalyticsContext:this.getAnalyticsContext,getAtlaskitAnalyticsEventHandlers:this.getAnalyticsEventHandlers}}render(){let{children:e}=this.props;return t(i).createElement(n("kNx8v").default.Provider,{value:this.contextValue},e)}}var c=l}),a("2BBco",function(r,s){e(r.exports,"default",()=>a);var i=n("eUqFw"),a=({data:e,children:r})=>{let s=(0,n("gNgZO").useTrackedRef)(e),a=(0,n("369Kv").useAnalyticsContext)(),o=(0,i.useCallback)(()=>[...a.getAtlaskitAnalyticsContext(),s.current],[a,s]),l=(0,i.useMemo)(()=>({getAtlaskitAnalyticsContext:o,getAtlaskitAnalyticsEventHandlers:a.getAtlaskitAnalyticsEventHandlers}),[a,o]);return t(i).createElement(n("kNx8v").default.Provider,{value:l},r)}}),a("369Kv",function(t,r){e(t.exports,"useAnalyticsContext",()=>i);var s=n("eUqFw");let i=()=>(0,s.useContext)(n("kNx8v").default)}),a("gNgZO",function(t,r){e(t.exports,"useTrackedRef",()=>i);var s=n("eUqFw");let i=e=>{let t=(0,s.useRef)(e);return t.current=e,t}}),a("5wCOA",function(t,r){e(t.exports,"NAVIGATION_CONTEXT",()=>i),e(t.exports,"NavigationAnalyticsContext",()=>a);var s=n("hKkEL");let i="navigationCtx",a=(0,s.default)(i,"NavigationAnalyticsContext")}),a("dlE38",function(t,r){e(t.exports,"EDITOR_CONTEXT",()=>o),e(t.exports,"EDITOR_APPEARANCE_CONTEXT",()=>i),e(t.exports,"FabricEditorAnalyticsContext",()=>l);var s,i,a=n("hKkEL");let o="fabricEditorCtx";(s=i||(i={})).FIXED_WIDTH="fixedWidth",s.FULL_WIDTH="fullWidth",s.COMMENT="comment",s.CHROMELESS="chromeless",s.MOBILE="mobile";let l=(0,a.default)(o,"FabricEditorAnalyticsContext")});const o="mediaCtx";a("48k2V",function(t,r){e(t.exports,"PEOPLE_TEAMS_CONTEXT",()=>i),e(t.exports,"PeopleTeamsAnalyticsContext",()=>a);var s=n("hKkEL");let i="peopleTeamsCtx",a=(0,s.default)(i,"PeopleTeamsAnalyticsContext")}),a("8N29D",function(t,r){e(t.exports,"NOTIFICATIONS_CONTEXT",()=>i),e(t.exports,"NotificationsAnalyticsContext",()=>a);var s=n("hKkEL");let i="NotificationsCtx",a=(0,s.default)(i,"NotificationsAnalyticsContext")}),a("gjC6M",function(t,r){e(t.exports,"RECENT_WORK_CONTEXT",()=>i),e(t.exports,"RecentWorkAnalyticsContext",()=>a);var s=n("hKkEL");let i="RecentWorkCtx",a=(0,s.default)(i,"RecentWorkAnalyticsContext")}),a("fZ5Cn",function(t,r){e(t.exports,"ATLAS_CONTEXT",()=>i);var s=n("hKkEL");let i="atlasCtx";(0,s.default)(i,"AtlasAnalyticsContext")}),a("hw8rx",function(t,r){e(t.exports,"LINKING_PLATFORM_CONTEXT",()=>i);var s=n("hKkEL");let i="linkingPlatformCtx";(0,s.default)(i,"LinkingPlatformAnalyticsContext")}),a("cMbrx",function(t,r){e(t.exports,"POST_OFFICE_CONTEXT",()=>i);var s=n("hKkEL");let i="postOfficeCtx";(0,s.default)(i,"PostOfficeAnalyticsContext")}),a("eUjFK",function(t,r){e(t.exports,"AI_MATE_CONTEXT",()=>i);var s=n("hKkEL");let i="aiMateCtx";(0,s.default)(i,"AIMateAnalyticsContext")}),a("fSlhC",function(t,r){e(t.exports,"default",()=>d);var s=n("bJZEG"),i=n("41rU7");n("an89Y");var a="/*|*/",o=a+"}";function l(e){e&&c.current.insert(e+"}")}var c={current:null},u=function(e,t,r,s,i,n,u,d,h,p){switch(e){case 1:switch(t.charCodeAt(0)){case 64:return c.current.insert(t+";"),"";case 108:if(98===t.charCodeAt(2))return""}break;case 2:if(0===d)return t+a;break;case 3:switch(d){case 102:case 112:return c.current.insert(r[0]+t),"";default:return t+(0===p?a:"")}case -2:t.split(o).forEach(l)}},d=function(e){void 0===e&&(e={});var t,r,n=e.key||"css";void 0!==e.prefix&&(t={prefix:e.prefix});var a=new i.default(t),o={};r=e.container||document.head;var l=document.querySelectorAll("style[data-emotion-"+n+"]");Array.prototype.forEach.call(l,function(e){e.getAttribute("data-emotion-"+n).split(" ").forEach(function(e){o[e]=!0}),e.parentNode!==r&&r.appendChild(e)}),a.use(e.stylisPlugins)(u);var d={key:n,sheet:new s.StyleSheet({key:n,container:r,nonce:e.nonce,speedy:e.speedy}),nonce:e.nonce,inserted:o,registered:{},insert:function(e,t,r,s){var i=t.name;c.current=r,a(e,t.styles),s&&(d.inserted[i]=!0)}};return d}}),a("41rU7",function(t,r){e(t.exports,"default",()=>s);var s=function(e){function t(e,t,s){var i=t.trim().split(f);t=i;var n=i.length,a=e.length;switch(a){case 0:case 1:var o=0;for(e=0===a?"":e[0]+" ";o<n;++o)t[o]=r(e,t[o],s).trim();break;default:var l=o=0;for(t=[];o<n;++o)for(var c=0;c<a;++c)t[l++]=r(e[c]+" ",i[o],s).trim()}return t}function r(e,t,r){var s=t.charCodeAt(0);switch(33>s&&(s=(t=t.trim()).charCodeAt(0)),s){case 38:return t.replace(g,"$1"+e.trim());case 58:return e.trim()+t.replace(g,"$1"+e.trim());default:if(0<1*r&&0<t.indexOf("\f"))return t.replace(g,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function s(e,t,r,n){var a=e+";",o=2*t+3*r+4*n;if(944===o){e=a.indexOf(":",9)+1;var l=a.substring(e,a.length-1).trim();return l=a.substring(0,e).trim()+l+";",1===k||2===k&&i(l,1)?"-webkit-"+l+l:l}if(0===k||2===k&&!i(a,1))return a;switch(o){case 1015:return 97===a.charCodeAt(10)?"-webkit-"+a+a:a;case 951:return 116===a.charCodeAt(3)?"-webkit-"+a+a:a;case 963:return 110===a.charCodeAt(5)?"-webkit-"+a+a:a;case 1009:if(100!==a.charCodeAt(4))break;case 969:case 942:return"-webkit-"+a+a;case 978:return"-webkit-"+a+"-moz-"+a+a;case 1019:case 983:return"-webkit-"+a+"-moz-"+a+"-ms-"+a+a;case 883:if(45===a.charCodeAt(8))return"-webkit-"+a+a;if(0<a.indexOf("image-set(",11))return a.replace(A,"$1-webkit-$2")+a;break;case 932:if(45===a.charCodeAt(4))switch(a.charCodeAt(5)){case 103:return"-webkit-box-"+a.replace("-grow","")+"-webkit-"+a+"-ms-"+a.replace("grow","positive")+a;case 115:return"-webkit-"+a+"-ms-"+a.replace("shrink","negative")+a;case 98:return"-webkit-"+a+"-ms-"+a.replace("basis","preferred-size")+a}return"-webkit-"+a+"-ms-"+a+a;case 964:return"-webkit-"+a+"-ms-flex-"+a+a;case 1023:if(99!==a.charCodeAt(8))break;return"-webkit-box-pack"+(l=a.substring(a.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+a+"-ms-flex-pack"+l+a;case 1005:return h.test(a)?a.replace(d,":-webkit-")+a.replace(d,":-moz-")+a:a;case 1e3:switch(t=(l=a.substring(13).trim()).indexOf("-")+1,l.charCodeAt(0)+l.charCodeAt(t)){case 226:l=a.replace(E,"tb");break;case 232:l=a.replace(E,"tb-rl");break;case 220:l=a.replace(E,"lr");break;default:return a}return"-webkit-"+a+"-ms-"+l+a;case 1017:if(-1===a.indexOf("sticky",9))break;case 975:switch(t=(a=e).length-10,o=(l=(33===a.charCodeAt(t)?a.substring(0,t):a).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|l.charCodeAt(7))){case 203:if(111>l.charCodeAt(8))break;case 115:a=a.replace(l,"-webkit-"+l)+";"+a;break;case 207:case 102:a=a.replace(l,"-webkit-"+(102<o?"inline-":"")+"box")+";"+a.replace(l,"-webkit-"+l)+";"+a.replace(l,"-ms-"+l+"box")+";"+a}return a+";";case 938:if(45===a.charCodeAt(5))switch(a.charCodeAt(6)){case 105:return l=a.replace("-items",""),"-webkit-"+a+"-webkit-box-"+l+"-ms-flex-"+l+a;case 115:return"-webkit-"+a+"-ms-flex-item-"+a.replace(T,"")+a;default:return"-webkit-"+a+"-ms-flex-line-pack"+a.replace("align-content","").replace(T,"")+a}break;case 973:case 989:if(45!==a.charCodeAt(3)||122===a.charCodeAt(4))break;case 931:case 953:if(!0===w.test(e))return 115===(l=e.substring(e.indexOf(":")+1)).charCodeAt(0)?s(e.replace("stretch","fill-available"),t,r,n).replace(":fill-available",":stretch"):a.replace(l,"-webkit-"+l)+a.replace(l,"-moz-"+l.replace("fill-",""))+a;break;case 962:if(a="-webkit-"+a+(102===a.charCodeAt(5)?"-ms-"+a:"")+a,211===r+n&&105===a.charCodeAt(13)&&0<a.indexOf("transform",10))return a.substring(0,a.indexOf(";",27)+1).replace(p,"$1-webkit-$2")+a}return a}function i(e,t){var r=e.indexOf(1===t?":":"{"),s=e.substring(0,3!==t?r:10);return r=e.substring(r+1,e.length-1),N(2!==t?s:s.replace(O,"$1"),r,t)}function n(e,t){var r=s(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return r!==t+";"?r.replace(I," or ($1)").substring(4):"("+t+")"}function a(e,t,r,s,i,n,a,o,c,u){for(var d,h=0,p=t;h<R;++h)switch(d=P[h].call(l,e,p,r,s,i,n,a,o,c,u)){case void 0:case!1:case!0:case null:break;default:p=d}if(p!==t)return p}function o(e){return void 0!==(e=e.prefix)&&(N=null,e?"function"!=typeof e?k=1:(k=2,N=e):k=0),o}function l(e,r){var o=e;if(33>o.charCodeAt(0)&&(o=o.trim()),o=[o],0<R){var l=a(-1,r,o,o,S,_,0,0,0,0);void 0!==l&&"string"==typeof l&&(r=l)}var d=function e(r,o,l,d,h){for(var p,f,g,E,I,T=0,O=0,w=0,A=0,P=0,N=0,M=g=p=0,j=0,F=0,U=0,L=0,B=l.length,K=B-1,J="",W="",V="",G="";j<B;){if(f=l.charCodeAt(j),j===K&&0!==O+A+w+T&&(0!==O&&(f=47===O?10:47),A=w=T=0,B++,K++),0===O+A+w+T){if(j===K&&(0<F&&(J=J.replace(u,"")),0<J.trim().length)){switch(f){case 32:case 9:case 59:case 13:case 10:break;default:J+=l.charAt(j)}f=59}switch(f){case 123:for(p=(J=J.trim()).charCodeAt(0),g=1,L=++j;j<B;){switch(f=l.charCodeAt(j)){case 123:g++;break;case 125:g--;break;case 47:switch(f=l.charCodeAt(j+1)){case 42:case 47:e:{for(M=j+1;M<K;++M)switch(l.charCodeAt(M)){case 47:if(42===f&&42===l.charCodeAt(M-1)&&j+2!==M){j=M+1;break e}break;case 10:if(47===f){j=M+1;break e}}j=M}}break;case 91:f++;case 40:f++;case 34:case 39:for(;j++<K&&l.charCodeAt(j)!==f;);}if(0===g)break;j++}if(g=l.substring(L,j),0===p&&(p=(J=J.replace(c,"").trim()).charCodeAt(0)),64===p){switch(0<F&&(J=J.replace(u,"")),f=J.charCodeAt(1)){case 100:case 109:case 115:case 45:F=o;break;default:F=C}if(L=(g=e(o,F,g,f,h+1)).length,0<R&&(I=a(3,g,F=t(C,J,U),o,S,_,L,f,h,d),J=F.join(""),void 0!==I&&0===(L=(g=I.trim()).length)&&(f=0,g="")),0<L)switch(f){case 115:J=J.replace(b,n);case 100:case 109:case 45:g=J+"{"+g+"}";break;case 107:g=(J=J.replace(m,"$1 $2"))+"{"+g+"}",g=1===k||2===k&&i("@"+g,3)?"@-webkit-"+g+"@"+g:"@"+g;break;default:g=J+g,112===d&&(W+=g,g="")}else g=""}else g=e(o,t(o,J,U),g,d,h+1);V+=g,g=U=F=M=p=0,J="",f=l.charCodeAt(++j);break;case 125:case 59:if(1<(L=(J=(0<F?J.replace(u,""):J).trim()).length))switch(0===M&&(45===(p=J.charCodeAt(0))||96<p&&123>p)&&(L=(J=J.replace(" ",":")).length),0<R&&void 0!==(I=a(1,J,o,r,S,_,W.length,d,h,d))&&0===(L=(J=I.trim()).length)&&(J="\x00\x00"),p=J.charCodeAt(0),f=J.charCodeAt(1),p){case 0:break;case 64:if(105===f||99===f){G+=J+l.charAt(j);break}default:58!==J.charCodeAt(L-1)&&(W+=s(J,p,f,J.charCodeAt(2)))}U=F=M=p=0,J="",f=l.charCodeAt(++j)}}switch(f){case 13:case 10:47===O?O=0:0===1+p&&107!==d&&0<J.length&&(F=1,J+="\x00"),0<R*D&&a(0,J,o,r,S,_,W.length,d,h,d),_=1,S++;break;case 59:case 125:if(0===O+A+w+T){_++;break}default:switch(_++,E=l.charAt(j),f){case 9:case 32:if(0===A+T+O)switch(P){case 44:case 58:case 9:case 32:E="";break;default:32!==f&&(E=" ")}break;case 0:E="\\0";break;case 12:E="\\f";break;case 11:E="\\v";break;case 38:0===A+O+T&&(F=U=1,E="\f"+E);break;case 108:if(0===A+O+T+x&&0<M)switch(j-M){case 2:112===P&&58===l.charCodeAt(j-3)&&(x=P);case 8:111===N&&(x=N)}break;case 58:0===A+O+T&&(M=j);break;case 44:0===O+w+A+T&&(F=1,E+="\r");break;case 34:case 39:0===O&&(A=A===f?0:0===A?f:A);break;case 91:0===A+O+w&&T++;break;case 93:0===A+O+w&&T--;break;case 41:0===A+O+T&&w--;break;case 40:0===A+O+T&&(0===p&&(2*P+3*N==533||(p=1)),w++);break;case 64:0===O+w+A+T+M+g&&(g=1);break;case 42:case 47:if(!(0<A+T+w))switch(O){case 0:switch(2*f+3*l.charCodeAt(j+1)){case 235:O=47;break;case 220:L=j,O=42}break;case 42:47===f&&42===P&&L+2!==j&&(33===l.charCodeAt(L+2)&&(W+=l.substring(L,j+1)),E="",O=0)}}0===O&&(J+=E)}N=P,P=f,j++}if(0<(L=W.length)){if(F=o,0<R&&void 0!==(I=a(2,W,F,r,S,_,L,d,h,d))&&0===(W=I).length)return G+W+V;if(W=F.join(",")+"{"+W+"}",0!=k*x){switch(2!==k||i(W,2)||(x=0),x){case 111:W=W.replace(v,":-moz-$1")+W;break;case 112:W=W.replace(y,"::-webkit-input-$1")+W.replace(y,"::-moz-$1")+W.replace(y,":-ms-input-$1")+W}x=0}}return G+W+V}(C,o,r,0,0);return 0<R&&void 0!==(l=a(-2,d,o,o,S,_,d.length,0,0,0))&&(d=l),x=0,_=S=1,d}var c=/^\0+/g,u=/[\0\r\f]/g,d=/: */g,h=/zoo|gra/,p=/([,: ])(transform)/g,f=/,\r+?/g,g=/([\t\r\n ])*\f?&/g,m=/@(k\w+)\s*(\S*)\s*/,y=/::(place)/g,v=/:(read-only)/g,E=/[svh]\w+-[tblr]{2}/,b=/\(\s*(.*)\s*\)/g,I=/([\s\S]*?);/g,T=/-self|flex-/g,O=/[^]*?(:[rp][el]a[\w-]+)[^]*/,w=/stretch|:\s*\w+\-(?:conte|avail)/,A=/([^-])(image-set\()/,_=1,S=1,x=0,k=1,C=[],P=[],R=0,N=null,D=0;return l.use=function e(t){switch(t){case void 0:case null:R=P.length=0;break;default:if("function"==typeof t)P[R++]=t;else if("object"==typeof t)for(var r=0,s=t.length;r<s;++r)e(t[r]);else D=0|!!t}return e},l.set=o,void 0!==e&&o(e),l}}),a("an89Y",function(e,t){}),a("2DMI8",function(t,r){e(t.exports,"serializeStyles",()=>m);var s,i=n("kNNmE"),a=n("1l72c"),o=n("3vBWa"),l=/[A-Z]|^ms/g,c=/_EMO_([^_]+?)_([^]*?)_EMO_/g,u=function(e){return 45===e.charCodeAt(1)},d=function(e){return null!=e&&"boolean"!=typeof e},h=(0,o.default)(function(e){return u(e)?e:e.replace(l,"-$&").toLowerCase()}),p=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(c,function(e,t,r){return s={name:t,styles:r,next:s},t})}return 1===a.default[e]||u(e)||"number"!=typeof t||0===t?t:t+"px"};function f(e,t,r,i){if(null==r)return"";if(void 0!==r.__emotion_styles)return r;switch(typeof r){case"boolean":return"";case"object":if(1===r.anim)return s={name:r.name,styles:r.styles,next:s},r.name;if(void 0!==r.styles){var n=r.next;if(void 0!==n)for(;void 0!==n;)s={name:n.name,styles:n.styles,next:s},n=n.next;return r.styles+";"}return function(e,t,r){var s="";if(Array.isArray(r))for(var i=0;i<r.length;i++)s+=f(e,t,r[i],!1);else for(var n in r){var a=r[n];if("object"!=typeof a)null!=t&&void 0!==t[a]?s+=n+"{"+t[a]+"}":d(a)&&(s+=h(n)+":"+p(n,a)+";");else if(Array.isArray(a)&&"string"==typeof a[0]&&(null==t||void 0===t[a[0]]))for(var o=0;o<a.length;o++)d(a[o])&&(s+=h(n)+":"+p(n,a[o])+";");else{var l=f(e,t,a,!1);switch(n){case"animation":case"animationName":s+=h(n)+":"+l+";";break;default:s+=n+"{"+l+"}"}}}return s}(e,t,r);case"function":if(void 0!==e){var a=s,o=r(e);return s=a,f(e,t,o,i)}}if(null==t)return r;var l=t[r];return void 0===l||i?r:l}var g=/label:\s*([^\s;\n{]+)\s*;/g,m=function(e,t,r){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var n,a=!0,o="";s=void 0;var l=e[0];null==l||void 0===l.raw?(a=!1,o+=f(r,t,l,!1)):o+=l[0];for(var c=1;c<e.length;c++)o+=f(r,t,e[c],46===o.charCodeAt(o.length-1)),a&&(o+=l[c]);g.lastIndex=0;for(var u="";null!==(n=g.exec(o));)u+="-"+n[1];return{name:(0,i.default)(o)+u,styles:o,next:s}}}),a("kNNmE",function(t,r){e(t.exports,"default",()=>s);var s=function(e){for(var t,r=0,s=0,i=e.length;i>=4;++s,i-=4)t=(65535&(t=255&e.charCodeAt(s)|(255&e.charCodeAt(++s))<<8|(255&e.charCodeAt(++s))<<16|(255&e.charCodeAt(++s))<<24))*1540483477+((t>>>16)*59797<<16),t^=t>>>24,r=(65535&t)*1540483477+((t>>>16)*59797<<16)^(65535&r)*1540483477+((r>>>16)*59797<<16);switch(i){case 3:r^=(255&e.charCodeAt(s+2))<<16;case 2:r^=(255&e.charCodeAt(s+1))<<8;case 1:r^=255&e.charCodeAt(s),r=(65535&r)*1540483477+((r>>>16)*59797<<16)}return r^=r>>>13,(((r=(65535&r)*1540483477+((r>>>16)*59797<<16))^r>>>15)>>>0).toString(36)}}),a("1l72c",function(t,r){e(t.exports,"default",()=>s);var s={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1}}),a("3vBWa",function(t,r){e(t.exports,"default",()=>s);var s=function(e){var t={};return function(r){return void 0===t[r]&&(t[r]=e(r)),t[r]}}}),a("jYVKV",function(r,s){e(r.exports,"default",()=>o);var i=n("eUqFw"),a=n("2fFJv"),o=e=>{let r=null!=a&&a.env?.ANALYTICS_NEXT_MODERN_CONTEXT;return r||(0,n("XHGTv").getBooleanFF)("platform.analytics-next-use-modern-context_fqgbx")?t(i).createElement(n("6EGCa").default,e):t(i).createElement(n("5ZgZX").default,e)}}),a("5ZgZX",function(r,s){e(r.exports,"default",()=>c);var i=n("eUqFw");let a={getAtlaskitAnalyticsEventHandlers:t(n("1Qivz")).func,getAtlaskitAnalyticsContext:t(n("1Qivz")).func},o=()=>[];class l extends i.Component{static{this.contextTypes=a}static{this.childContextTypes=a}constructor(e){super(e),this.getChildContext=()=>({getAtlaskitAnalyticsEventHandlers:this.getAnalyticsEventHandlers,getAtlaskitAnalyticsContext:this.getAtlaskitAnalyticsContext}),this.getAnalyticsEventHandlers=()=>{let{channel:e,onEvent:t}=this.props,{getAtlaskitAnalyticsEventHandlers:r=o}=this.context;return[(r,s)=>{("*"===e||e===s)&&t(r,s)},...r()]},this.getAtlaskitAnalyticsContext=()=>{let{getAtlaskitAnalyticsContext:e=o}=this.context;return e()},this.contextValue={getAtlaskitAnalyticsContext:this.getAtlaskitAnalyticsContext,getAtlaskitAnalyticsEventHandlers:this.getAnalyticsEventHandlers}}render(){let{children:e}=this.props;return t(i).createElement(n("kNx8v").default.Provider,{value:this.contextValue},e)}}var c=l}),a("6EGCa",function(r,s){e(r.exports,"default",()=>a);var i=n("eUqFw"),a=({children:e,channel:r,onEvent:s})=>{let a=(0,n("369Kv").useAnalyticsContext)(),o=(0,n("gNgZO").useTrackedRef)(s),l=(0,n("gNgZO").useTrackedRef)(r),c=(0,i.useCallback)(()=>[...a.getAtlaskitAnalyticsEventHandlers(),(e,t)=>{("*"===l.current||l.current===t)&&o.current(e,t)}],[a,l,o]),u=(0,i.useMemo)(()=>({getAtlaskitAnalyticsEventHandlers:c,getAtlaskitAnalyticsContext:a.getAtlaskitAnalyticsContext}),[a,c]);return t(i).createElement(n("kNx8v").default.Provider,{value:u},e)}}),a("lUFyV",function(t,r){e(t.exports,"usePlatformLeafEventHandler",()=>i);var s=n("eUqFw");function i({fn:e,action:t,componentName:r,actionSubject:i,packageName:a,packageVersion:o,analyticsData:l}){let{createAnalyticsEvent:c}=(0,n("bFzGY").useAnalyticsEvents)(),u=(0,n("gNgZO").useTrackedRef)(l),d=(0,n("gNgZO").useTrackedRef)(e),h=(0,s.useCallback)(e=>{let s=c({action:t,actionSubject:i||r,attributes:{componentName:r,packageName:a,packageVersion:o}}),n={componentName:r,packageName:a,packageVersion:o,...u.current};s.context.push(n);let l=s.clone();l&&l.fire("atlaskit"),d.current(e,s)},[t,r,i,a,o,c,u,d]);return h}}),a("bFzGY",function(t,r){e(t.exports,"useAnalyticsEvents",()=>s);function s(){let e=(0,n("369Kv").useAnalyticsContext)(),t=(0,n("fzXll").useCallbackOne)(t=>new(n("cPQ3Q")).default({context:e.getAtlaskitAnalyticsContext(),handlers:e.getAtlaskitAnalyticsEventHandlers(),payload:t}),[e]);return{createAnalyticsEvent:t}}}),a("cPQ3Q",function(t,r){e(t.exports,"isUIAnalyticsEvent",()=>s),e(t.exports,"default",()=>i);let s=e=>e instanceof i||!!e?._isUIAnalyticsEvent||e?.constructor?.name==="UIAnalyticsEvent";class i extends n("64G28").default{constructor(e){super(e),this._isUIAnalyticsEvent=!0,this.clone=()=>{if(this.hasFired)return null;let e=[...this.context],t=[...this.handlers],r=JSON.parse(JSON.stringify(this.payload));return new i({context:e,handlers:t,payload:r})},this.fire=e=>{this.hasFired||(this.handlers.forEach(t=>t(this,e)),this.hasFired=!0)},this.context=e.context||[],this.handlers=e.handlers||[],this.hasFired=!1}update(e){return this.hasFired?this:super.update(e)}}}),a("64G28",function(t,r){e(t.exports,"default",()=>s);class s{constructor(e){this._isAnalyticsEvent=!0,this.clone=()=>{let e={...this.payload};return new s({payload:e})},this.payload=e.payload}update(e){return"function"==typeof e&&(this.payload=e(this.payload)),"object"==typeof e&&(this.payload={...this.payload,...e}),this}}}),a("jsCXU",function(t,r){e(t.exports,"default",()=>s);var s=(0,n("eUqFw").createContext)(null)}),a("3WQZN",function(t,r){e(t.exports,"allFeatureFlagsAccessed",()=>s),e(t.exports,"currentFeatureFlagsAccessed",()=>i),e(t.exports,"addFeatureFlagAccessed",()=>a);let s=new Map,i=new Map,a=(e,t)=>{let r=(0,n("jy7Jn").redactValue)(t);s.set(e,r),i.set(e,r)}}),a("jy7Jn",function(t,r){e(t.exports,"redactValue",()=>o);let s=e=>{try{if("{"===e.charAt(0))return!0}catch(e){}return!1},i=e=>e&&"object"==typeof e&&e.constructor===Object,n=e=>{let t;try{t="string"==typeof e||e instanceof String}catch(e){t=!1}return t},a=e=>n(e)&&s(e)||i(e),o=e=>a(e)?l:e});const l="non_boolean";a("6DrxJ",function(t,r){e(t.exports,"default",()=>n("6zdMY").default),n("6zdMY"),n("irT3s")}),a("6zdMY",function(t,r){e(t.exports,"default",()=>l);var s=n("irT3s"),i=n("5YjqH"),a=n("ftRND"),o=n("kpFez");class l{constructor(e){(0,i.enforceAttributes)(e,["analyticsHandler"],"Feature Flag Client");let{flags:t,analyticsHandler:r,isAutomaticExposuresEnabled:s,isMissingFlagEventsDisabled:n,ignoreTypes:a}=e;this.flags=new Map,this.flagWrapperCache=new Map,this.customAttributesExposuresCache=new Set,this.trackedFlags=new Set,this.isAutomaticExposuresEnabled=s||!1,this.isMissingFlagEventsDisabled=n??!1,this.ignoreTypes=a||!1,this.setFlags(t||{}),this.setAnalyticsHandler(r)}setFlags(e){if((0,i.isObject)(e))for(let t of(Object.entries(e).forEach(([e,t])=>{this.flags.set(e,t)}),this.flagWrapperCache.keys()))e.hasOwnProperty(t)&&this.flagWrapperCache.delete(t)}setAnalyticsHandler(e){this.analyticsHandler=e}setIsAutomaticExposuresEnabled(e){this.isAutomaticExposuresEnabled=e}getFlagWrapper(e){let t=this.flagWrapperCache.get(e);if(void 0!==t)return t;let r=this.flags.get(e);return t=r?new o.default(e,r,this._trackExposure.bind(this),this.sendAutomaticExposure.bind(this),this.ignoreTypes):new a.default(e,this.shouldSendMissingFlagAutomaticExposure(e)?this.sendAutomaticExposure.bind(this):null),this.flagWrapperCache.set(e,t),t}shouldSendMissingFlagAutomaticExposure(e){let t=e.startsWith("platform.");return!this.isMissingFlagEventsDisabled&&!t}clear(){this.flags.clear(),this.flagWrapperCache.clear(),this.trackedFlags.clear()}getBooleanValue(e,t){(0,i.enforceAttributes)(t,["default"],"getBooleanValue");let r=this.getFlagWrapper(e);return r.getBooleanValue(t)}getVariantValue(e,t){(0,i.enforceAttributes)(t,["default","oneOf"],"getVariantValue");let r=this.getFlagWrapper(e);return r.getVariantValue(t)}getJSONValue(e){let t=this.getFlagWrapper(e);return t.getJSONValue()}getRawValue(e,t){(0,i.enforceAttributes)(t,["default"],"getRawValue");let r=this.getFlagWrapper(e);return r.getRawValue(t)}getFlagEvaluation(e,t){(0,i.enforceAttributes)(t,["default"],"getRawValue");let r=this.getFlagWrapper(e);return r.getFlagEvaluation(t)}trackFeatureFlag(e,t={}){let r=t?.triggerReason?t.triggerReason:s.ExposureTriggerReason.Manual,i=this.flags.has(e)||"value"in t;if(!i){console.warn(`No value associated with the flagKey: ${e} with an exposure trigger reason of: ${r}`);return}let n="value"in t?t.value:this.flags.get(e)?.value,a=t?.explanation?t.explanation:this.flags.get(e)?.explanation;r===s.ExposureTriggerReason.AutoExposure?this.sendAutomaticExposure(e,n,a):this._trackExposure(e,{value:n,explanation:a},r)}trackExposure(e,t,r={}){return this._trackExposure(e,t,s.ExposureTriggerReason.Manual,r)}_trackExposure(e,t,r,s){if(!(t&&t.explanation&&this.shouldSendEvent(e,s)))return;(0,i.checkForReservedAttributes)(s);let n={flagKey:e,reason:t.explanation.kind,ruleId:t.explanation.ruleId,value:t.value};this.sendExposureEvent(n,r,s)}shouldSendEvent(e,t){return void 0!==this.analyticsHandler&&(!this.trackedFlags.has(e)||!(0,i.isObjectEmptyOrUndefined)(t)&&!this.customAttributesExposuresCache.has(e))}sendAutomaticExposure(e,t,r){if(!(r&&this.isAutomaticExposuresEnabled&&this.shouldSendEvent(e)))return;let i={flagKey:e,value:t,reason:r.kind||"SIMPLE_EVAL",ruleId:r.ruleId,errorKind:r.errorKind};this.sendExposureEvent(i,s.ExposureTriggerReason.AutoExposure)}sendExposureEvent(e,t,r){if(this.trackedFlags.has(e.flagKey)||(this.analyticsHandler?.sendOperationalEvent({action:"exposed",actionSubject:"feature",attributes:e,tags:["measurement",t],highPriority:!1,source:"@atlaskit/feature-flag-client"}),this.trackedFlags.add(e.flagKey)),!(0,i.isObjectEmptyOrUndefined)(r)){let i={action:"exposed",actionSubject:"feature",attributes:Object.assign({},e,r),tags:["measurement",s.ExposureTriggerReason.hasCustomAttributes,t],highPriority:!0,source:"@atlaskit/feature-flag-client"};this.analyticsHandler?.sendOperationalEvent(i),this.customAttributesExposuresCache.add(e.flagKey)}}getFlagStats(){let e={};for(let[t,r]of this.flagWrapperCache){let{evaluationCount:s}=r;e[t]={evaluationCount:s}}return e}}}),a("irT3s",function(t,r){var s,i;e(t.exports,"ExposureTriggerReason",()=>s),(i=s||(s={})).OptIn="optInExposure",i.Manual="manualExposure",i.Default="defaultExposure",i.AutoExposure="autoExposure",i.hasCustomAttributes="hasCustomAttributes"}),a("5YjqH",function(t,r){e(t.exports,"isObject",()=>s),e(t.exports,"isObjectEmptyOrUndefined",()=>i),e(t.exports,"enforceAttributes",()=>n),e(t.exports,"checkForReservedAttributes",()=>a);let s=e=>"object"==typeof e,i=e=>!e||0===Object.keys(e).length,n=(e,t,r)=>{t.forEach(t=>{if(!(t in e)){let e=r?`${r}: `:"";throw Error(`${e}Missing ${t}`)}})},a=e=>{let t=["flagKey","ruleId","reason","value","errorKind"],r=e?Object.keys(e):[];if(t.some(e=>r.includes(e)))throw TypeError(`exposureData contains a reserved attribute. Reserved attributes are: ${t.join(", ")}`)}}),a("ftRND",function(t,r){e(t.exports,"default",()=>i);let s={kind:"ERROR",errorKind:"FLAG_NOT_FOUND"};class i{constructor(e,t){this.flagKey=e,this.sendAutomaticExposure=t,this.evaluationCount=0}evaluate(e){return null!=this.sendAutomaticExposure&&this.sendAutomaticExposure(this.flagKey,e,s),this.evaluationCount++,e}getBooleanValue(e){return this.evaluate(e.default)}getVariantValue(e){return this.evaluate(e.default)}getJSONValue(){return this.evaluate({})}getRawValue(e){return this.evaluate(e.default)}getFlagEvaluation(e){let t=this.evaluate(e.default);return{value:t,explanation:s}}}}),a("kpFez",function(t,r){e(t.exports,"default",()=>i);var s=n("irT3s");class i{constructor(e,t,r,s,i){this.flagKey=e,this.flag=t,this.evaluationCount=0,this.trackExposure=r,this.sendAutomaticExposure=s,this.ignoreTypes=i}getCachedResultOrCompute(e,{shouldTrackExposureEvent:t,exposureData:r,oneOf:i,ignoreTypes:n}){let a=s.ExposureTriggerReason.OptIn;void 0===t&&(t=!0,a=s.ExposureTriggerReason.Default),void 0===this.evaluationResult&&(this.evaluationResult=this.computeWithValidation(e,{oneOf:i,ignoreTypes:n}));let o=this.evaluationResult.value;return this.evaluationResult.didFallbackToDefaultValue?o=e:t&&this.trackExposure(this.flagKey,this.flag,a,r),this.sendAutomaticExposure(this.flagKey,o,this.evaluationResult.explanation),this.evaluationCount++,{value:o,explanation:this.evaluationResult.explanation}}computeWithValidation(e,{oneOf:t,ignoreTypes:r}){let s={value:this.flag.value,explanation:this.flag.explanation,didFallbackToDefaultValue:!1};return r||typeof this.flag.value==typeof e?void 0===t||t.includes(this.flag.value)||(s.value=e,s.didFallbackToDefaultValue=!0,s.explanation={...s.explanation||{},kind:"ERROR",errorKind:"VALIDATION_ERROR"}):(s.value=e,s.didFallbackToDefaultValue=!0,s.explanation={...s.explanation||{},kind:"ERROR",errorKind:"WRONG_TYPE"}),s}getBooleanValue(e){let t=this.getCachedResultOrCompute(e.default,{exposureData:e.exposureData,shouldTrackExposureEvent:e.shouldTrackExposureEvent,oneOf:void 0,ignoreTypes:this.ignoreTypes||!1});return t.value}getVariantValue(e){let t=this.getCachedResultOrCompute(e.default,{exposureData:e.exposureData,shouldTrackExposureEvent:e.shouldTrackExposureEvent,oneOf:e.oneOf,ignoreTypes:this.ignoreTypes||!1});return t.value}getJSONValue(){return this.getCachedResultOrCompute({},{shouldTrackExposureEvent:!1,ignoreTypes:this.ignoreTypes}).value}getRawValue(e){return this.getCachedResultOrCompute(e.default,{shouldTrackExposureEvent:e.shouldTrackExposureEvent,exposureData:e.exposureData,oneOf:void 0,ignoreTypes:!0}).value}getFlagEvaluation(e){return this.getCachedResultOrCompute(e.default,{shouldTrackExposureEvent:e.shouldTrackExposureEvent,exposureData:e.exposureData,ignoreTypes:this.ignoreTypes||!1})}}}),a("4K830",function(t,r){e(t.exports,"isFedRamp",()=>s);function s(){var e,t;let r=globalThis.MICROS_PERIMETER||globalThis.UNSAFE_ATL_CONTEXT_BOUNDARY;if(r)return r===c;let s=null===(e=globalThis.location)||void 0===e?void 0:null===(t=e.hostname)||void 0===t?void 0:t.match(/atlassian-us-gov-mod\.(com|net)|atlassian-us-gov\.(com|net)|atlassian-fex\.(com|net)|atlassian-stg-fedm\.(com|net)/);return!!s&&s.length>0}});const c="fedramp-moderate";a("jkH4Q",function(r,s){e(r.exports,"default",()=>l);var i=n("dFBS3");let a="atlOrigin",o={originLibrary:"origin-tracing.js@"};class l{constructor({id:e=l.generateId(),product:t,dangerouslySkipValidation:r=!1}){this.id=e,this.product=t,r||this.validate()}static isValidId(e){return"string"==typeof e&&/^[-_a-zA-Z0-9]{1,36}$/.test(e)}static isValidProduct(e){return"string"==typeof e&&/^[-_a-zA-Z0-9]{1,20}$/.test(e)}static generateId(){let e=t(i)();return e.replace(/-/g,"")}static createEmpty(){return new c}static createMalformed(){return new u}static fromUrl(e){let t=new((0,n("dnilo").getEnv)()).URLSearchParams;return d(e,e=>{t=new((0,n("dnilo").getEnv)()).URLSearchParams(e)}),l.fromEncoded(t.get(a))}static fromEncoded(e){if(!e)return l.createEmpty();try{return l.decode(e)}catch(e){return l.createMalformed()}}static removeFromUrl(e){return d(e,e=>{let t=new((0,n("dnilo").getEnv)()).URLSearchParams(e);return t.delete(a),t.toString()})}static decode(e){let t=(0,n("eTnTn").decode)(e);return new l(t)}encode(){return(0,n("eTnTn").encode)({id:this.id,product:this.product})}addToUrl(e){return d(e,e=>{let t=new((0,n("dnilo").getEnv)()).URLSearchParams(e);return t.set(a,this.encode()),t.toString()})}isEmpty(){return!1}isMalformed(){return!this.isEmpty()&&!this.isValid()}isValid(){return!0}toAnalyticsAttributes({transformValue:e=e=>null===e?void 0:e,hasGeneratedId:t=!1}={}){return{[t?"originIdGenerated":"originId"]:e(this.id),originProduct:e(this.product),...o}}validate(){if(!l.isValidId(this.id))throw TypeError("Invalid Origin id");if(!l.isValidProduct(this.product))throw TypeError("Missing/invalid Origin product")}}class c extends l{constructor(){super({id:null,product:null,dangerouslySkipValidation:!0})}isValid(){return!1}isEmpty(){return!0}toAnalyticsAttributes(){return{...o}}}class u extends l{constructor(){super({id:null,product:null,dangerouslySkipValidation:!0})}isValid(){return!1}isEmpty(){return!1}toAnalyticsAttributes(){return{originMalformed:!0,...o}}}function d(e,t){let r=String(e);return r.replace(/(^[^?#]*)(?:\?)?([^#]*?)(#.*|$)$/,(e,r,s,i)=>{let n=t(s);return n&&(n=`?${n}`),`${r}${n}${i}`})}}),a("eTnTn",function(t,r){e(t.exports,"encode",()=>i),e(t.exports,"decode",()=>a);let s={confluence:"c",jira:"j",stride:"s",bitbucket:"b",trello:"t"};function i(e){let t=JSON.stringify(function({id:e,product:t}){return{i:e,p:t&&t in s?s[t]:t}}(e)),r=(0,n("dnilo").getEnv)().btoa(t);return(0,n("64p9r").base64ToBase64Url)(r)}function a(e){let t=(0,n("64p9r").base64UrlToBase64)(e),r=(0,n("dnilo").getEnv)().atob(t);return function(e){let t={};return e.i&&(t.id=e.i),e.p&&(t.product=function(e){let t=Object.keys(s);for(let r=0;r<t.length;r++){let i=t[r],n=s[i];if(e===n)return i}return e}(e.p)),t}(JSON.parse(r))}}),a("64p9r",function(t,r){function s(e){return null==e?"":String(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function i(e){if(null==e)return"";let t=String(e).replace(/-/g,"+").replace(/_/g,"/"),r=(4-e.length%4)%4;return t+"===".slice(0,r)}e(t.exports,"base64ToBase64Url",()=>s),e(t.exports,"base64UrlToBase64",()=>i)}),a("dnilo",function(t,r){let s;e(t.exports,"getEnv",()=>o);var i=n("aul3P");let a=()=>({atob:"function"==typeof atob&&atob.bind(void 0)||void 0!==i.Buffer&&(e=>(0,i.Buffer).from(e,"base64").toString()),btoa:"function"==typeof btoa&&btoa.bind(void 0)||void 0!==i.Buffer&&(e=>(0,i.Buffer).from(e).toString("base64")),URLSearchParams:"function"==typeof URLSearchParams&&URLSearchParams||n("78Ywx").URLSearchParams}),o=()=>s||(s=l(a())),l=e=>{if(!(e.atob&&e.btoa&&e.URLSearchParams))throw TypeError("Origin-Tracing: missing environment APIs. Required: btoa(), atob(), URLSearchParams() (or in Node: Buffer, require('url').URLSearchParams).");return e}}),a("gmPP3",function(t,r){e(t.exports,"CompressionRule",()=>i);var s=n("5zQU9");class i{constructor(e,t){if((0,s.default)(this,"canCompress",e=>{try{return e&&(0,n("49KuO").isActionEventType)(e.eventType)&&this.predicate(e)}catch(e){return!1}}),(0,s.default)(this,"compress",e=>{let[t,r]=(0,n("eaJEm").partition)(e,e=>this.canCompress(e)),s=this.compressFn(t);if(!s)throw Error("No events were returned from the compression function");return s.forEach(e=>{(0,n("49KuO").validateActionEventType)(e.eventType),(0,n("49KuO").validateActionEvent)(e)}),s.concat(r)}),"function"!=typeof e)throw Error("Invalid predicate, must be a function that accepts an event and returns a boolean");if("function"!=typeof t)throw Error("Invalid compressFn, must be a function that both accepts and returns an array of events");this.predicate=e,this.compressFn=t}}}),a("49KuO",function(t,r){e(t.exports,"validateContainers",()=>i),e(t.exports,"isActionEventType",()=>a),e(t.exports,"validateActionEventType",()=>o),e(t.exports,"validateActionEvent",()=>l),e(t.exports,"validateScreenEvent",()=>c),e(t.exports,"validateTrackEvent",()=>u),e(t.exports,"validateDwellBaseEvent",()=>d),e(t.exports,"validateUIEvent",()=>h),e(t.exports,"validateOperationalEvent",()=>p),e(t.exports,"validateIdentifyEvent",()=>f),e(t.exports,"validatePlatform",()=>g);let s=Object.freeze([n("hRleJ").eventType.OPERATIONAL,n("hRleJ").eventType.TRACK,n("hRleJ").eventType.UI]);function i(e){if(e){if(e&&e.constructor!==Object)throw Error("properties.containers must be an Object");Object.values(e).forEach(e=>(function(e){if(!(0,n("f6ddt").isPlainObject)(e))throw Error("properties.containers must be an Object");if(!("id"in e))throw Error("properties.containers is missing field 'id'");if("string"!=typeof e.id)throw Error("properties.containers.id must be of type String");if("type"in e&&"string"!=typeof e.type)throw Error("properties.containers.type must be of type String")})(e))}}function a(e){switch(e){case n("hRleJ").eventType.OPERATIONAL:case n("hRleJ").eventType.TRACK:case n("hRleJ").eventType.UI:return!0;default:return!1}}function o(e){if(!a(e))throw Error(`Invalid action event type: ${e}, must be one of: [${s}]`);return!0}function l(e){if(!e)throw Error("Missing event");if(!e.source)throw Error("Missing event.source");if(!e.actionSubject)throw Error("Missing event.actionSubject");if(!e.action)throw Error("Missing event.action");i(e.containers)}function c(e){if(!e)throw Error("Missing name")}function u(e){l(e)}function d(e){if(!e)throw Error("Missing event");if(!e.source)throw Error("Missing event.source");if(!e.actionSubject)throw Error("Missing event.actionSubject")}function h(e){l(e)}function p(e){l(e)}function f(e,t){if(!e)throw Error("Missing userIdType");if(!t)throw Error("Missing userId");if(!(0,n("hRleJ").isType)(n("hRleJ").userType,e))throw Error(`Invalid userIdType '${e}', must be an userType: [${(0,n("hRleJ").objectValues)(n("hRleJ").userType)}]`)}function g(e){if(!(0,n("hRleJ").isType)(n("hRleJ").platformType,e.platform))throw Error(`Invalid productInfo.platform '${e.platform}', must be a platformType: [${(0,n("hRleJ").objectValues)(n("hRleJ").platformType)}]`);if(e.origin===n("hRleJ").originType.DESKTOP&&!(0,n("hRleJ").isType)(n("hRleJ").desktopPlatforms,e.platform))throw Error(`Invalid productInfo.platform '${e.platform}', must be one of [mac, linux, windows]`);if(e.origin===n("hRleJ").originType.WEB&&!(0,n("hRleJ").isType)(n("hRleJ").webPlatforms,e.platform))throw Error(`Invalid productInfo.platform '${e.platform}', must be one of [web, mobileWeb]`)}}),a("hRleJ",function(t,r){var s,i,n,a,o,l,c,u,d,h,p;e(t.exports,"envType",()=>f),e(t.exports,"eventType",()=>g),e(t.exports,"platformType",()=>m),e(t.exports,"originType",()=>y),e(t.exports,"tenantType",()=>v),e(t.exports,"userType",()=>E),e(t.exports,"apdexType",()=>b),e(t.exports,"desktopPlatforms",()=>I),e(t.exports,"webPlatforms",()=>T),e(t.exports,"originTracingType",()=>O),e(t.exports,"objectValues",()=>w),e(t.exports,"isType",()=>A),e(t.exports,"perimeterType",()=>_),e(t.exports,"aliasType",()=>S),e(t.exports,"groupType",()=>x),e(t.exports,"envOverrides",()=>k);let f=((s={}).LOCAL="local",s.DEV="dev",s.STAGING="staging",s.PROD="prod",s),g=((i={}).TRACK="track",i.UI="ui",i.OPERATIONAL="operational",i.SCREEN="screen",i.IDENTIFY="identify",i),m=((n={}).MAC="mac",n.LINUX="linux",n.WINDOWS="windows",n.DESKTOP="desktop",n.WEB="web",n.MOBILE_WEB="mobileWeb",n),y=((a={}).DESKTOP="desktop",a.WEB="web",a),v=((o={}).CLOUD_ID="cloudId",o.ORG_ID="orgId",o.OPSGENIE_CUSTOMER_ID="opsgenieCustomerId",o.HALP_TEAM_ID="halpTeamId",o.TRANSACTION_ACCOUNT_ID="transactionAccountId",o.TRELLO_WORKSPACE_ID="trelloWorkspaceId",o.NONE="none",o),E=((l={}).ATLASSIAN_ACCOUNT="atlassianAccount",l.HASHED_EMAIL="hashedEmail",l.TRELLO="trello",l.OPSGENIE="opsgenie",l.HALP="halp",l),b=((c={}).TRANSITION="transition",c.INITIAL_LOAD="initialLoad",c),I=Object.freeze([m.DESKTOP,m.MAC,m.LINUX,m.WINDOWS]),T=Object.freeze([m.WEB,m.MOBILE_WEB]),O=((u={}).ATL_ORIGIN="atlOrigin",u);function w(e){return Object.values(e)}function A(e,t){return Object.values(e).indexOf(t)>-1}let _=((d={}).C5="c5",d.COMMERCIAL="commercial",d.FEDRAMP_MODERATE="fedramp-moderate",d.FEDRAMP_HIGH="fedramp-high",d),S={},x=((h={}).TRANSACTION_ACCOUNT_ID="transactionAccountId",h),k=((p={}).FEDRAMP_MODERATE_SANDBOX="fedramp-moderate-sandbox",p)}),a("f6ddt",function(t,r){function s(e){return!0==(null!==e&&"object"==typeof e&&!1===Array.isArray(e))&&"[object Object]"===Object.prototype.toString.call(e)}function i(e){if(!1===s(e))return!1;let t=e.constructor;if("function"!=typeof t)return!1;let r=t.prototype;return!1!==s(r)&&"isPrototypeOf"in r}e(t.exports,"isPlainObject",()=>i)}),a("eaJEm",function(t,r){e(t.exports,"mapKeys",()=>s),e(t.exports,"pick",()=>i),e(t.exports,"omitBy",()=>n),e(t.exports,"pickBy",()=>a),e(t.exports,"omit",()=>o),e(t.exports,"equals",()=>l),e(t.exports,"partition",()=>c);let s=(e,t)=>Object.keys(e).reduce((r,s)=>{let i=t(e[s],s,e);return r[i]=e[s],r},{}),i=(e,t)=>t.reduce((t,r)=>(r in e&&(t[r]=e[r]),t),{}),n=(e,t)=>Object.keys(e).filter(r=>!t(e[r],r)).reduce((t,r)=>(t[r]=e[r],t),{}),a=(e,t)=>Object.keys(e).filter(r=>t(e[r],r)).reduce((t,r)=>(t[r]=e[r],t),{}),o=(e,t)=>Object.keys(e).filter(e=>0>t.indexOf(e)).reduce((t,r)=>(t[r]=e[r],t),{}),l=(e,t)=>{if(e===t)return!0;if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(!e||!t||"object"!=typeof e&&"object"!=typeof t)return e===t;if(e.prototype!==t.prototype)return!1;let r=Object.keys(e);return r.length===Object.keys(t).length&&r.every(r=>l(e[r],t[r]))},c=(e,t)=>e.reduce((e,r,s,i)=>(e[t(r,s,i)?0:1].push(r),e),[[],[]])}),a("aYU4Z",function(r,s){e(r.exports,"default",()=>u);var i=n("5zQU9"),a=n("dFBS3");function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){(0,i.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let c="last.screen.event";class u{constructor(e,r={}){if((0,i.default)(this,"_useStargate",e=>null==e||e),(0,i.default)(this,"_endsWith",(e,t)=>-1!==e.indexOf(t,e.length-t.length)),(0,i.default)(this,"_changeInternalUserId",(e,t)=>{this.eventProcessor.getUser().setUserId(e),t&&t!==this.eventProcessor.getUser().getAnonymousId()&&this.eventProcessor.getUser().setAnonymousId(t)}),(0,i.default)(this,"_createSubproductGetter",e=>(0,n("eIGW7").default)(e,"Cannot get subproduct from the callback. Proceeding without it.")),(0,i.default)(this,"_createEmbeddedProductGetter",e=>(0,n("eIGW7").default)(e,"Cannot get embeddedProduct from the callback. Proceeding without it.")),(0,i.default)(this,"_getLastScreenEvent",()=>{try{return JSON.parse(this._safeSessionStorage.getItem(c)||"")}catch(e){return this._safeSessionStorage.removeItem(c),null}}),(0,i.default)(this,"_setLastScreenEvent",e=>{this._safeSessionStorage.setItem(c,JSON.stringify({name:e.name,attributes:e.attributes}))}),(0,i.default)(this,"_shouldEventBeDelayed",e=>{if(!e.tags||-1===e.tags.indexOf("measurement"))return!1;let t=!1!==e.highPriority;return this.eventDelayQueue.isDelayingLowPriorityEvents()&&!t}),(0,i.default)(this,"_fireEvent",(e,t,r,s)=>{switch(t.eventType){case n("hRleJ").eventType.UI:case n("hRleJ").eventType.OPERATIONAL:case n("hRleJ").eventType.TRACK:return this.eventProcessor.track(e,t,r,s);case n("hRleJ").eventType.SCREEN:return this.eventProcessor.page(e,t,r,s);case n("hRleJ").eventType.IDENTIFY:return this.eventProcessor.identify(e,t,r,s);default:throw Error(`No handler has been defined for events of type ${t.eventType}`)}}),(0,i.default)(this,"_fireDelayedEvent",(e,t,r,s)=>{try{this._changeInternalUserId(s.userId,s.anonymousId),t.tags=[...t.tags||[],"sentWithDelay"],this._fireEvent(e,t,r,void 0)}finally{this._changeInternalUserId(this._userInfo.userId,this._userInfo.anonymousId)}}),(0,i.default)(this,"_delayEvent",(e,t,r,s,i)=>{this.eventDelayQueue.push(e,t,r,s),i&&i()}),(0,i.default)(this,"_processEvent",(e,t,r,s)=>(this._testingCache.saveEvent(t),this._shouldEventBeDelayed(t))?(this._delayEvent(e,t,r,this._userInfo,s),Promise.resolve()):this._fireEvent(e,t,r,s)),(0,i.default)(this,"setEmbeddedProduct",e=>{this._productInfo.embeddedProduct=this._createEmbeddedProductGetter(e),this.resetUIViewedTimers()}),(0,i.default)(this,"clearEmbeddedProduct",()=>{this._productInfo.embeddedProduct=this._createEmbeddedProductGetter(null)}),(0,i.default)(this,"setSubproduct",e=>{this._productInfo.subproduct=this._createSubproductGetter(e),this.resetUIViewedTimers()}),(0,i.default)(this,"setOriginTracingHandlers",e=>{let t=this.originTracing.handleOriginParameters(e,this._historyReplaceFn);Object.keys(t).forEach(e=>{void 0!==t[e].taskSessionId&&this.task.createTaskSessionWithProvidedId(e,t[e].taskSessionId)});let r={};return(Object.keys(t).forEach(e=>{t[e].originTracingAttributes?r[e]=t[e].originTracingAttributes:console.warn(`Handling method for origin parameter ${e} has not returned any attributes`)}),Object.keys(t).length>0)?this.sendOperationalEvent({action:"landed",actionSubject:"origin",source:"webClient",attributes:{originTracesLanded:r}},()=>{}):Promise.resolve()}),(0,i.default)(this,"setTenantInfo",(e,t)=>{if(!e)throw Error("Missing tenantIdType");if(e!==n("hRleJ").tenantType.NONE&&!t)throw Error("Missing tenantId");if(!(0,n("hRleJ").isType)(n("hRleJ").tenantType,e))throw Error(`Invalid tenantIdType '${e}', must be an tenantType: [${(0,n("hRleJ").objectValues)(n("hRleJ").tenantType)}]`);this._tenantInfo={tenantIdType:e,tenantId:t}}),(0,i.default)(this,"clearTenantInfo",()=>{this._tenantInfo={}}),(0,i.default)(this,"setOrgInfo",e=>{if(!e)throw Error("Missing orgId");this._orgInfo={orgId:e}}),(0,i.default)(this,"clearOrgInfo",()=>{this._orgInfo={}}),(0,i.default)(this,"setWorkspaceInfo",e=>{if(!e)throw Error("Missing workspaceId");this._workspaceInfo={workspaceId:e}}),(0,i.default)(this,"clearWorkspaceInfo",()=>{this._workspaceInfo={}}),(0,i.default)(this,"setUserInfo",(e,t)=>{(0,n("49KuO").validateIdentifyEvent)(e,t),this._changeInternalUserId(t),this._userInfo={userIdType:e,userId:t,anonymousId:this.eventProcessor.getUser().getAnonymousId()}}),(0,i.default)(this,"clearUserInfo",()=>{this._changeInternalUserId(void 0),this._userInfo={anonymousId:this.eventProcessor.getUser().getAnonymousId()}}),(0,i.default)(this,"setAlias",(e,t)=>{if(!e)throw Error("Missing aliasType");if(!(0,n("hRleJ").isType)(n("hRleJ").aliasType,e))throw Error(`Invalid aliasType '${e}', must be an aliasType: [${(0,n("hRleJ").objectValues)(n("hRleJ").aliasType)}]`);this._aliases[e]=t}),(0,i.default)(this,"clearAlias",()=>{this._aliases={}}),(0,i.default)(this,"setGroup",(e,t)=>{if(!e)throw Error("Missing groupType");if(!(0,n("hRleJ").isType)(n("hRleJ").groupType,e))throw Error(`Invalid groupType '${e}', must be an groupType: [${(0,n("hRleJ").objectValues)(n("hRleJ").groupType)}]`);this._groups[e]=t}),(0,i.default)(this,"clearGroup",()=>{this._groups={}}),(0,i.default)(this,"getAnonymousId",()=>this._userInfo.anonymousId),(0,i.default)(this,"setUIViewedAttributes",e=>{if(!e)throw Error("Missing uiViewedAttributes");if("object"!=typeof e||Array.isArray(e))throw Error("Invalid uiViewedAttributes type, should be a non array object");this._uiViewedAttributes=l({},e)}),(0,i.default)(this,"getUIViewedAttributes",()=>this._uiViewedAttributes),(0,i.default)(this,"clearUIViewedAttributes",()=>{this._uiViewedAttributes={}}),(0,i.default)(this,"sendIdentifyEvent",(e,t,r)=>{this.setUserInfo(e,t);let s={userIdType:e,eventType:n("hRleJ").eventType.IDENTIFY};return this._processEvent(t,s,this._context,r)}),(0,i.default)(this,"sendPageEvent",(e,t)=>this.sendScreenEvent(e,t)),(0,i.default)(this,"sendScreenEvent",(e,t,r)=>{let s,i,a,o;"object"==typeof e?(s=e.name,i=e.attributes,a=e.containers,o=e.tags):(s=e,i=r),(0,n("49KuO").validateScreenEvent)(s),(0,n("49KuO").validateContainers)(a);let c=(0,n("bVXPQ").buildScreenEvent)(this._productInfo,this._tenantInfo,this._userInfo,i,e.nonPrivacySafeAttributes,o,this._tabTracking.getCurrentTabId(),this._sessionTracking.getCurrentSessionId(),this.task.getAllTaskSessions(),this._orgInfo,this._pageLoadId,this._workspaceInfo,e,a,this._aliases,this._groups),u=l({name:s},c);return this._setLastScreenEvent(u),this._processEvent(s,u,this._context,(0,n("1ZcVH").default)(t,u))}),(0,i.default)(this,"sendTrackEvent",(e,t)=>{(0,n("49KuO").validateTrackEvent)(e);let r=(0,n("bVXPQ").buildActionEvent)(this._productInfo,this._tenantInfo,this._userInfo,e,n("hRleJ").eventType.TRACK,this._tabTracking.getCurrentTabId(),this._sessionTracking.getCurrentSessionId(),this.task.getAllTaskSessions(),this._orgInfo,this._pageLoadId,this._workspaceInfo,this._aliases,this._groups);return this._processEvent((0,n("bVXPQ").buildActionName)(e),r,this._context,(0,n("1ZcVH").default)(t,r))}),(0,i.default)(this,"sendUIEvent",(e,t)=>{(0,n("49KuO").validateUIEvent)(e);let r=(0,n("bVXPQ").buildActionEvent)(this._productInfo,this._tenantInfo,this._userInfo,e,n("hRleJ").eventType.UI,this._tabTracking.getCurrentTabId(),this._sessionTracking.getCurrentSessionId(),this.task.getAllTaskSessions(),this._orgInfo,this._pageLoadId,this._workspaceInfo,this._aliases,this._groups);return this._processEvent((0,n("bVXPQ").buildActionName)(e),r,this._context,(0,n("1ZcVH").default)(t,r))}),(0,i.default)(this,"sendOperationalEvent",(e,t)=>{(0,n("49KuO").validateOperationalEvent)(e);let r=(0,n("bVXPQ").buildActionEvent)(this._productInfo,this._tenantInfo,this._userInfo,e,n("hRleJ").eventType.OPERATIONAL,this._tabTracking.getCurrentTabId(),this._sessionTracking.getCurrentSessionId(),this.task.getAllTaskSessions(),this._orgInfo,this._pageLoadId,this._workspaceInfo,this._aliases,this._groups);return this._processEvent((0,n("bVXPQ").buildActionName)(e),r,this._context,(0,n("1ZcVH").default)(t,r))}),(0,i.default)(this,"startUIViewedEvent",e=>{this.stopUIViewedEvent(),this._uiViewedEvent=new(n("fBPLq")).default(this._productInfo,()=>({embeddedProduct:this._productInfo.embeddedProduct(),subproduct:this._productInfo.subproduct(),tenantIdType:this._tenantInfo.tenantIdType,tenantId:this._tenantInfo.tenantId,userId:this._userInfo.userId,lastScreenEvent:this._getLastScreenEvent(),attributes:this._uiViewedAttributes}),t=>this.sendUIEvent(t,e)),this._uiViewedEvent.start()}),(0,i.default)(this,"stopUIViewedEvent",()=>{this._uiViewedEvent&&(this._uiViewedEvent.stop(),this._uiViewedEvent=null)}),(0,i.default)(this,"resetUIViewedTimers",()=>{this._uiViewedEvent&&this._uiViewedEvent.resetTimers()}),(0,i.default)(this,"startApdexEvent",e=>{this._apdexEvent.start(e)}),(0,i.default)(this,"getApdexStart",e=>this._apdexEvent.getStart(e)),(0,i.default)(this,"stopApdexEvent",(e,t)=>{this._apdexEvent.stop(e,t)}),(0,i.default)(this,"startLowPriorityEventDelay",(e,t)=>{this.eventDelayQueue.startLowPriorityEventDelay(e,t)}),(0,i.default)(this,"stopLowPriorityEventDelay",()=>{this.eventDelayQueue.stopLowPriorityEventDelay()}),(0,i.default)(this,"onEvent",(e,t)=>{if(!t)throw Error("Missing analyticsData");if(!t.eventType)throw Error("Missing analyticsData.eventType");if(t.eventType===n("hRleJ").eventType.TRACK)return this.sendTrackEvent(t);if(t.eventType===n("hRleJ").eventType.UI)return this.sendUIEvent(t);if(t.eventType===n("hRleJ").eventType.OPERATIONAL)return this.sendOperationalEvent(t);if(t.eventType===n("hRleJ").eventType.SCREEN)return this.sendScreenEvent(t.name,null,t.attributes);if(t.eventType===n("hRleJ").eventType.IDENTIFY)return this.sendIdentifyEvent(t.userIdType,t.userId);throw Error(`Invalid analyticsData.eventType '${t.eventType}', must be an eventType: [${(0,n("hRleJ").objectValues)(n("hRleJ").eventType)}]`)}),!e)throw Error("Missing productInfo");if(!e.env)throw Error("Missing productInfo.env");if(!e.product)throw Error("Missing productInfo.product");if(!(0,n("hRleJ").isType)(n("hRleJ").envType,e.env))throw Error(`Invalid productInfo.env '${e.env}', must be an envType: [${(0,n("hRleJ").objectValues)(n("hRleJ").envType)}]`);if(e.perimeter&&!(0,n("hRleJ").isType)(n("hRleJ").perimeterType,e.perimeter))throw Error(`Invalid productInfo.perimeter '${e.perimeter}', must be an perimeterType: [${(0,n("hRleJ").objectValues)(n("hRleJ").perimeterType)}]`);if(e.origin){if(!(0,n("hRleJ").isType)(n("hRleJ").originType,e.origin))throw Error(`Invalid productInfo.origin '${e.origin}', must be an originType: [${(0,n("hRleJ").objectValues)(n("hRleJ").originType)}]`)}else e.origin=n("hRleJ").originType.WEB;e.platform?(0,n("49KuO").validatePlatform)(e):e.platform=e.origin===n("hRleJ").originType.WEB?n("hRleJ").platformType.WEB:n("hRleJ").platformType.DESKTOP,this.logger=r.logger||console,this._productInfo=l(l({},e),{},{subproduct:this._createSubproductGetter(e.subproduct),embeddedProduct:this._createEmbeddedProductGetter(e.embeddedProduct)}),this._tenantInfo={},this._orgInfo={},this._uiViewedAttributes={},this._context=(0,n("bVXPQ").buildContext)(this._productInfo),this._safeSessionStorage=new(n("cxp5h")).default;let s=this._useStargate(r.useStargate),o=r.apiHost||(0,n("hrLBB").selectHost)({useStargate:s,env:e.env,useLegacyUrl:r.useLegacyUrl,perimeter:e.perimeter,envOverride:e.envOverride}),u=r.apiHostProtocol||"https",d=r.minRetryDelay||1e3,h={maxRetryDelay:6e4,minRetryDelay:d,backoffFactor:2,flushWaitMs:r.flushWaitInterval,flushBeforeUnload:r.flushBeforeUnload},p=`awc-${e.env}`,f=r.disableCookiePersistence||!1;this.eventProcessor=new(n("54lSA")).default({apiHost:o,apiHostProtocol:u,product:e.product,retryQueuePrefix:p,retryQueueOptions:h,xidPromiseGetter:()=>(0,n("l4WDe").XIDPromise)(r.xidConsent,r.xidPromiseFn),logger:this.logger,disableCookiePersistence:f}),this._userInfo={anonymousId:this.eventProcessor.getUser().getAnonymousId(null==r?void 0:r.customAnonymousIdGenerator)},this._pageVisibility=new(n("b5Bi3")).default,this._tabTracking=new(n("kzV7m")).default,this._sessionTracking=new(n("1t0DP")).default({sessionExpiryTime:r.sessionExpiryTime,onNewSessionStarted:r.onNewSessionStarted}),this.task=new(n("6L92I")).default,this.originTracing=new(n("b88ir")).default,this._apdexEvent=new(n("9dEp1")).default(this.sendOperationalEvent,this._pageVisibility),this._historyReplaceFn="function"==typeof r.historyReplaceFn?r.historyReplaceFn:n("8TuVU").defaultHistoryReplaceFn,this.eventDelayQueue=new(n("ez3h7")).default(this._fireDelayedEvent,r.delayQueueCompressors||[]),this._testingCache=new(n("8Pilt")).default,this._pageLoadId=t(a)(),this._workspaceInfo={},this._aliases={},this._groups={}}}}),a("9dEp1",function(t,r){e(t.exports,"default",()=>o);var s=n("5zQU9");function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){(0,s.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}class o{constructor(e,t){if((0,s.default)(this,"_getEventKey",({task:e,taskId:t})=>t?`${e}.${t}`:e),(0,s.default)(this,"_getEventTimingByName",e=>{let t=this._performance.getEntriesByName(e),r=t[t.length-1];return r}),(0,s.default)(this,"_getApdexFields",e=>{let t=this._getApdexTimings(e),r=this._calculateApdex({duration:t.duration,threshold:e.threshold});return a(a({},t),{},{apdex:r})}),(0,s.default)(this,"_getApdexTimings",e=>{let t=this._getEventKey(e),r=`${t}-start`,s=e.startTime||this._getStartTime(e,r),i=e.stopTime||this._getStopTime();return this._cleanApdexState(t),{startTime:s,stopTime:i,duration:i-s}}),(0,s.default)(this,"_getStartTime",(e,t)=>{let r;let s=this._performance.getTimeOrigin();if(e.type===n("hRleJ").apdexType.INITIAL_LOAD)r=s;else{let e=this._getEventTimingByName(t);r=s+e.startTime}return r}),(0,s.default)(this,"_getStopTime",()=>this._performance.getTimeOrigin()+this._performance.now()),(0,s.default)(this,"_cleanApdexState",e=>{this._performance.clearMarks(`${e}-start`),this._performance.clearMarks(`${e}-stop`),this._startedEvents.delete(e)}),(0,s.default)(this,"_getVisibilityFields",e=>{let t;if(e.type===n("hRleJ").apdexType.INITIAL_LOAD)t=!this._wasPreviouslyHidden;else if(e.type===n("hRleJ").apdexType.TRANSITION){let r=this._getEventKey(e);t=this._isActiveEvents.get(r)}return(e.startTime||e.stopTime)&&(t=!this._pageVisibility.getIsHidden()),{isActiveTab:t}}),(0,s.default)(this,"_calculateApdex",({duration:e,threshold:t=this._threshold})=>e<=t?1:e<=4*t?.5:0),(0,s.default)(this,"_validateStartEvent",e=>{if(!e)throw Error('Missing "event" in Apdex start event');if(!e.task)throw Error('Missing "task" in Apdex start event');if("string"!=typeof e.task)throw Error('Invalid "task" in Apdex start event');if(e.taskId&&"string"!=typeof e.taskId)throw Error('Invalid "taskId" in Apdex start event')}),(0,s.default)(this,"_validateStopEvent",e=>{if(!e)throw Error('Missing "event" in Apdex stop event');if(!e.task)throw Error('Missing "task" in Apdex stop event');if("string"!=typeof e.task)throw Error('Invalid "task" in Apdex stop event');if(e.taskId&&"string"!=typeof e.taskId)throw Error('Invalid "taskId" in Apdex stop event');if(!e.type)throw Error('Missing "type" in Apdex stop event');if(e.type&&!(0,n("hRleJ").isType)(n("hRleJ").apdexType,e.type))throw Error('Invalid "type" in Apdex stop event');if(e.threshold&&"number"!=typeof e.threshold)throw Error('Invalid "threshold" in Apdex stop event');if(!e.startTime&&e.type===n("hRleJ").apdexType.TRANSITION){let t=this._getEventKey(e);if(!this._startedEvents.has(t))throw Error(`Apdex event transition "${t}" was not started`)}if(e.startTime&&!("number"==typeof e.startTime&&e.startTime>=0))throw Error('Invalid "startTime" in Apdex stop event');if(e.stopTime&&"number"!=typeof e.stopTime)throw Error('Invalid "stopTime" in Apdex stop event');if(e.stopTime<=e.startTime)throw Error('"stopTime" should be greater than "startTime" in Apdex stop event')}),(0,s.default)(this,"_shouldSendEvent",e=>!!e&&"number"==typeof e.apdex),(0,s.default)(this,"_sendEvent",(e,t)=>{this._shouldSendEvent(e)&&this._onEvent({source:"ui",action:"readyForUser",actionSubject:"ui",attributes:a(a({},e.additionalAttributes),{},{task:e.task,taskId:e.taskId,type:e.type,threshold:e.threshold||this._threshold,apdex:e.apdex,startTime:e.startTime,stopTime:e.stopTime,duration:e.duration,isActiveTab:e.isActiveTab})},t)}),!e)throw Error("Missing onEvent callback");if("function"!=typeof e)throw Error("Invalid onEvent, must be function");if(!(t instanceof n("b5Bi3").default))throw Error("Invalid pageVisibility, must be PageVisibility class");this._startedEvents=new Map,this._performance=new(n("hTk3G")).default,this._onEvent=e,this._threshold=1e3,this._wasPreviouslyHidden=t.getIsHidden(),this._isActiveEvents=new Map,this._pageVisibility=t,this._pageVisibility.addCallback("apdexEvent",e=>{this.onVisibilityChange(!e)})}start(e){if(this._validateStartEvent(e),!this._performance.isAvailable())return;let t=this._getEventKey(e),r=`${t}-start`;this._startedEvents.set(t,!0),this._isActiveEvents.set(t,!this._pageVisibility.getIsHidden()),this._performance.clearMarks(r),this._performance.mark(r)}getStart(e){if(this._validateStartEvent(e),!this._performance.isAvailable())return;let t=this._getEventKey(e),r=`${t}-start`;return this._getEventTimingByName(r)}stop(e,t){if(this._validateStopEvent(e),!this._performance.isAvailable())return;let r=this._getApdexFields(e),s=this._getVisibilityFields(e);this._sendEvent(a(a(a({},e),r),s),t)}onVisibilityChange(e){e||(this._wasPreviouslyHidden=!0,Array.from(this._isActiveEvents.keys()).forEach(e=>this._isActiveEvents.set(e,!1)))}}}),a("b5Bi3",function(t,r){e(t.exports,"default",()=>i);var s=n("5zQU9");class i{constructor(){(0,s.default)(this,"_bindEventListeners",()=>{document.addEventListener(this._visibilityChange,this._handleVisibilityChange,!1)}),(0,s.default)(this,"_handleVisibilityChange",()=>{let e=document[this._hidden];this._isHidden=e,this._callbacks.forEach(t=>t(e))}),this._isHidden=!1,this._callbacks=new Map,this._hidden=void 0,this._visibilityChange=void 0,"undefined"!=typeof document&&(void 0!==document.hidden?(this._isHidden=document.hidden,this._hidden="hidden",this._visibilityChange="visibilitychange"):void 0!==document.msHidden?(this._isHidden=document.msHidden,this._hidden="msHidden",this._visibilityChange="msvisibilitychange"):void 0!==document.webkitHidden&&(this._isHidden=document.webkitHidden,this._hidden="webkitHidden",this._visibilityChange="webkitvisibilitychange"),void 0!==document.addEventListener&&void 0!==this._hidden&&this._bindEventListeners())}addCallback(e,t){if("string"!=typeof e)throw Error("Invalid name, must be string");if("function"!=typeof t)throw Error("Invalid callback, must be function");this._callbacks.set(e,t)}removeCallback(e){this._callbacks.has(e)&&this._callbacks.delete(e)}getIsHidden(){return this._isHidden}}}),a("hTk3G",function(t,r){e(t.exports,"default",()=>s);class s{constructor(){this._performance=window.performance}clearMarks(...e){this._performance&&this._performance.clearMarks&&this._performance.clearMarks(...e)}mark(...e){this._performance&&this._performance.mark&&this._performance.mark(...e)}getEntriesByName(...e){return this._performance&&this._performance.getEntriesByName?this._performance.getEntriesByName(...e):[]}getTimeOrigin(){return this._performance&&(this._performance.timeOrigin||this._performance.timing)?this._performance.timeOrigin||this._performance.timing.navigationStart:0}now(){return this._performance&&this._performance.now?this._performance.now():Date.now?Date.now():+new Date}isAvailable(){return!!this._performance&&!!this._performance.clearMarks&&!!this._performance.mark&&!!this._performance.getEntriesByName&&!!this._performance.timing}}}),a("eIGW7",function(t,r){e(t.exports,"default",()=>i);let s=e=>"function"==typeof e;var i=(e,t)=>()=>{if(s(e))try{return e()}catch(e){console.error(`${t} - ${e instanceof Error?e.message:String(e)}`);return}return e}}),a("bVXPQ",function(t,r){e(t.exports,"buildActionFields",()=>E),e(t.exports,"buildScreenEvent",()=>b),e(t.exports,"buildActionName",()=>I),e(t.exports,"buildContext",()=>T),e(t.exports,"buildActionEvent",()=>O);var s=n("5zQU9");function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){(0,s.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function o(e){return{tenantIdType:e.tenantIdType,tenantId:e.tenantId}}function l(e){return{userIdType:e.userIdType}}function c(e){return{orgId:e.orgId}}function u(e){return{workspaceId:e.workspaceId}}function d(e){if(m(e))return{aliases:e}}function h(e){if(m(e))return{groups:e}}function p(e){return e.anonymousId?{anonymousId:e.anonymousId}:{}}function f(e,t){return void 0===t?e:t}function g(e,t){let r=t||{},s=f(e.env,r.env),i=f(e.product,r.product),n=f(e.subproduct(),r.subproduct),a=f(e.version,r.version),o=f(e.origin,r.origin),l=f(e.platform,r.platform);return{env:s,product:i,subproduct:n,version:a,origin:o,platform:l}}function m(e){return(0,n("f6ddt").isPlainObject)(e)&&Object.keys(e).length>0}function y(e,t){return m(t)?{[e]:t}:void 0}function v(e){if(m(e)){let t=function(e){let t={};return Object.keys(e).forEach(r=>{let s=e[r];t[r]={id:s.id,type:s.type}}),t}(e);return y("containers",t)}}function E(e,t){return a({containerType:e.containerType,containerId:e.containerId,source:e.source,objectType:e.objectType,objectId:e.objectId,actionSubject:e.actionSubject,action:e.action,actionSubjectId:e.actionSubjectId,attributes:e.attributes,nonPrivacySafeAttributes:e.nonPrivacySafeAttributes,tags:e.tags,highPriority:e.highPriority,eventType:t},v(e.containers))}function b(e,t,r,s,i,f,m,E,b,I,T,O,w,A,_,S){let x=g(e),k=o(t),C=l(r),P=c(I),R=u(O),N={title:"",path:"",url:"",referrer:"",search:"",eventType:n("hRleJ").eventType.SCREEN};return a(a(a(a(a(a(a(a(a(a(a(a({},x),k),C),P),N),y("attributes",s)),y("nonPrivacySafeAttributes",i)),v(A)),p(w)),{},{tags:f,tabId:m,sessionId:E,taskSessions:b,pageLoadId:T},R),d(_)),h(S))}function I(e){return`${e.actionSubject} ${e.action}`}function T(e){let t=window.screen||{};return{context:{locale:e.locale,screen:{width:t.width,height:t.height,density:window.devicePixelRatio},library:{name:"analytics.js",version:"4.23.0"}}}}function O(e,t,r,s,i,n,f,m,y,v,b,I,T){let O=g(e,function(e){let{env:t,product:r,subproduct:s,version:i,origin:n,platform:a}=e;return{env:t,product:r,subproduct:s,version:i,origin:n,platform:a}}(s)),w=o(t),A=c(y),_=u(b),S=l(r),x=E(s,i);return a(a(a(a(a(a(a(a(a({},O),w),A),S),x),p(s)),{},{tabId:n,sessionId:f,taskSessions:m,pageLoadId:v},_),d(I)),h(T))}}),a("ez3h7",function(t,r){e(t.exports,"default",()=>i);var s=n("5zQU9");class i{constructor(e,t){(0,s.default)(this,"push",(e,t,r,s)=>{this.delayQueue.push(e,t,r,s)}),(0,s.default)(this,"startLowPriorityEventDelay",(e=u,t)=>{if(Number.isNaN(e)||e<=0)throw Error(`Invalid timeout period: ${e}, must be a number greater than 0`);this.delayTimeout&&clearTimeout(this.delayTimeout),this.delayCallback=t,this.delayTimeout=setTimeout(()=>this.stopLowPriorityEventDelay(n("38XXT").StopLowPriorityEventDelayReason.TIMEOUT),e?Math.min(e,d):d),this.delayQueue.cancelFlush(),this.isDelaying=!0}),(0,s.default)(this,"stopLowPriorityEventDelay",(e=n("38XXT").StopLowPriorityEventDelayReason.MANUAL)=>{var t;this.delayTimeout&&(clearTimeout(this.delayTimeout),this.delayTimeout=void 0),this.delayQueue.startFlush(),this.isDelaying=!1,null===(t=this.delayCallback)||void 0===t||t.call(this,e),this.delayCallback=void 0}),(0,s.default)(this,"isDelayingLowPriorityEvents",()=>this.isDelaying),this.isDelaying=!1,this.delayQueue=new(n("2PfP0")).default(e,t)}}});const u=1e4,d=3e4;a("2PfP0",function(t,r){e(t.exports,"default",()=>i);var s=n("5zQU9");class i{constructor(e,t){(0,s.default)(this,"push",(e,t,r,s)=>{this.eventArgs.push({identifier:e,builtEvent:t,context:r,userInfo:s})}),(0,s.default)(this,"size",()=>this.eventArgs.length),(0,s.default)(this,"startFlush",()=>{try{this.eventArgs=this.compressEventArgs(this.eventArgs)}catch(e){console.warn(`Failed to perform compression on the delayed analytics events. Error: ${e.message}. Sending ${this.eventArgs.length} uncompressed events instead`)}this.flushNextBatch()}),(0,s.default)(this,"cancelFlush",()=>{this.flushBatchTimeout&&(clearTimeout(this.flushBatchTimeout),this.flushBatchTimeout=null)}),(0,s.default)(this,"flushNextBatch",()=>{let e=this.eventArgs.splice(0,7);e.forEach(e=>this.processFn(e.identifier,e.builtEvent,e.context,e.userInfo)),this.eventArgs.length>0?this.flushBatchTimeout=setTimeout(()=>this.flushNextBatch(),100):this.flushBatchTimeout=null}),(0,s.default)(this,"compressEventArgs",e=>{let[t,r]=(0,n("eaJEm").partition)(e,e=>this.compressor.canCompress(e.builtEvent)),s=t.reduce((e,t)=>{let r=e.find(e=>(0,n("eaJEm").equals)(e.userInfo,t.userInfo)&&(0,n("eaJEm").equals)(e.context,t.context));return r?r.eventArgs.push(t):e.push({userInfo:t.userInfo,context:t.context,eventArgs:[t]}),e},[]),i=s.reduce((e,t)=>{try{let r=t.eventArgs.map(e=>e.builtEvent),s=this.compressor.compress(r),i=s.map(e=>({identifier:(0,n("bVXPQ").buildActionName)(e),builtEvent:e,userInfo:t.userInfo,context:t.context}));return e.concat(i)}catch(e){return console.warn(`Failed to compress some analytics events. Error: ${e.message}. Sending ${t.eventArgs.length} uncompressed events instead`),t.eventArgs}},[]);return r.forEach(e=>i.push(e)),i}),this.processFn=e,this.flushBatchTimeout=null,this.eventArgs=[],this.compressor=new(n("jvSgy")).default(t)}}}),a("jvSgy",function(t,r){e(t.exports,"default",()=>o);var s=n("5zQU9");function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){(0,s.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}class o{constructor(e=[]){if((0,s.default)(this,"canCompress",e=>this.compressionRules.some(t=>t.canCompress(e))),(0,s.default)(this,"compress",e=>{let t=this.createGroups(e);return t.reduce((e,t)=>{let r=this.compressGroup(t);return e.concat(r)},[])}),(0,s.default)(this,"createGroups",e=>e.reduce((e,t)=>{let r;let s=this.compressionRules.find(e=>e.canCompress(t));if(s){let e=(0,n("bVXPQ").buildActionFields)(t,t.eventType);r=(0,n("eaJEm").omit)(t,Object.keys(e))}let i=e.find(e=>s===e.compressor&&(0,n("eaJEm").equals)(r,e.contextFields));return i?i.events.push(t):e.push({contextFields:r,compressor:s,events:[t]}),e},[])),(0,s.default)(this,"compressGroup",e=>{if(!e.compressor)return e.events;try{let t=e.compressor.compress(e.events);return t.map(t=>a(a({},t),e.contextFields))}catch(t){return console.warn(`Failed to compress some analytics events. Error: ${t.message}. Sending ${e.events.length} uncompressed events instead`),e.events}}),!Array.isArray(e))throw Error("Event compressors must be constructed with an array of CompressionRules");if(!e.every(e=>e instanceof n("gmPP3").CompressionRule))throw Error("Event compressors can only be constructed with instances of CompressionRule");this.compressionRules=e}}}),a("38XXT",function(t,r){var s;e(t.exports,"StopLowPriorityEventDelayReason",()=>i);let i=((s={}).TIMEOUT="timeout",s.MANUAL="manual",s)}),a("54lSA",function(r,s){e(r.exports,"default",()=>c);var i=n("5zQU9"),a=n("dFBS3");function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){(0,i.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}class c{constructor(e){var t;(0,i.default)(this,"sendEvents",async(e,t)=>{let r=this.resilienceQueue.getGlobalRetryCount(),s=this.metrics.getMetricsPayload(),i=l(l({},s),{},{httpRetryCount:r});for(let e in i)0===i[e]&&delete i[e];let a=await this.attachXIDs(e),o=new Date().toISOString(),c=a.map(e=>(e.msg.sentAt=o,e.msg));try{let e=await (0,n("bpctN").sendEvents)({url:this.gasv3BatchUrl,batch:{batch:c,sentAt:o,metadata:i},timeout:this.options.requestTimeout});this.metrics.subtractFromMetrics(s),t(null,e)}catch(e){t(e,null)}}),this.options=l(l({},e),{},{requestTimeout:e.requestTimeout||n("dhCt2").DEFAULT_REQUEST_TIMEOUT,retryQueueOptions:e.retryQueueOptions||{},logger:e.logger||console,disableCookiePersistence:e.disableCookiePersistence||!1}),this.user=new(n("5UpLh")).default(null===(t=this.options)||void 0===t?void 0:t.disableCookiePersistence),this.xidPromiseCallback=e.xidPromiseGetter(),this.gasv3BatchUrl=`${e.apiHostProtocol}://${e.apiHost}/batch`,this.metrics=(0,n("j1fnp").default)(),this.resilienceQueue=(0,n("6WYmo").default)(e.retryQueuePrefix,e.product,this.options.retryQueueOptions,this.options.logger),this.resilienceQueue.start(this.sendEvents)}getUser(){return this.user}async track(e,t,r,s){let i=this.buildBaseEvent(r,n("6gNKz").SegmentEventTypes.TRACK,t),a=l(l({},i),{},{type:n("6gNKz").SegmentEventTypes.TRACK,properties:(0,n("kPI67").prepareEventProperties)(t),event:e}),o=l(l({},a),{},{messageId:this.createMessageId()}),c=this.packageEvent(o);await this.resilienceQueue.addItem(c),s&&s()}async page(e,t,r,s){let i=this.buildBaseEvent(r,n("6gNKz").SegmentEventTypes.PAGE,t),a=l(l({},i),{},{type:n("6gNKz").SegmentEventTypes.PAGE,properties:(0,n("kPI67").prepareEventProperties)(t),name:e}),o=l(l({},a),{},{messageId:this.createMessageId()}),c=this.packageEvent(o);await this.resilienceQueue.addItem(c),s&&s()}async identify(e,t,r,s){let i=this.buildBaseEvent(r,n("6gNKz").SegmentEventTypes.IDENTIFY,t),a=l(l({},i),{},{type:n("6gNKz").SegmentEventTypes.IDENTIFY,traits:(0,n("kPI67").prepareEventProperties)(t)}),o=l(l({},a),{},{messageId:this.createMessageId()}),c=this.packageEvent(o);await this.resilienceQueue.addItem(c),s&&s()}buildBaseEvent(e,t,r){let s=(0,n("kPI67").prepareEventProperties)(e),i=(0,n("kPI67").buildContext)(s);return{context:i,timestamp:new Date().toISOString(),type:t,userId:this.user.getUserId(),anonymousId:r.anonymousId||this.user.getAnonymousId()}}createMessageId(){return`ajs-${t(a)()}`}packageEvent(e){let{apiHost:t,apiHostProtocol:r}=this.options;return{headers:{"Content-Type":"text/plain"},msg:e,url:`${r}://${t}/${e.type.charAt(0)}`}}async attachXIDs(e){return this.xidPromiseCallback?(0,n("buuYU").attachXidToMultipleEvents)(e,this.xidPromiseCallback):Promise.resolve(e)}}}),a("6WYmo",function(t,r){e(t.exports,"default",()=>s);var s=(e,t,r,s)=>new(n("iIK97")).default(e,t,r||{},s)}),a("iIK97",function(t,r){e(t.exports,"default",()=>c);var s=n("5zQU9");function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){(0,s.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let o={backoffFactor:0,backoffJitterPercentage:0,flushWaitMs:6e4,minRetryDelay:6e4,maxRetryDelay:6e4},l={backoffFactor:2,backoffJitterPercentage:.2,batchFlushSize:7,flushBeforeUnload:!1,flushWaitMs:500,maxAttempts:10,maxItems:1e3,maxRetryDelay:3e4,minRetryDelay:1e3};class c{constructor(e,t,r,s){this.queuePrefix=e,this.resilience=new(n("IlgzD")).default(t,{logger:s,maxAttempts:null==r?void 0:r.maxAttempts,maxEventLimit:null==r?void 0:r.maxItems}),this.options=this.buildOptions(r),this.scheduler=new(n("9XgvA")).default(a(a({},this.options),{},{waitInterval:null!=r&&r.flushBeforeUnload?0:this.options.flushWaitMs}),this.scheduleCallback.bind(this)),this.longPollingScheduler=new(n("9XgvA")).default(a(a({},o),{},{waitInterval:o.flushWaitMs}),this.scheduleLongCallBack.bind(this)),this.metricsCollector=(0,n("j1fnp").default)(),this.networkStatus=new(n("4g0Nt")).default(e=>{e===n("hObqm").NetworkStatusEnum.OFFLINE?this.scheduler.stop():this.checkEventCountAndReschedule()})}start(e){this.batchFlushCallback=e,this.longPollingScheduler.schedule()}stop(){this.scheduler.stop(),this.longPollingScheduler.stop()}async addItem(e){let t=JSON.parse(JSON.stringify(e)),{numberOfEvictedItems:r}=await this.resilience.addItem(t,{},n("gKFhB").GuardPolicy.EVICT);this.scheduler.schedule(),this.metricsCollector.addToEventCount(),r>0&&this.metricsCollector.addToItemsDiscardedByOverflowCounter(r)}getGlobalRetryCount(){return this.scheduler.getFailureCount()}async scheduleCallback(e){if(this.networkStatus.getNetworkStatus()===n("hObqm").NetworkStatusEnum.OFFLINE){e(n("feAgz").DoneState.NOOP);return}try{let t=await this.resilience.processItems(this.flush.bind(this),this.options.batchFlushSize);e(t)}catch(t){if(t.name===n("dJ5oQ").CallbackProcessingErrorName){e(n("feAgz").DoneState.ERROR);return}}finally{await this.checkEventCountAndReschedule()}}async checkEventCountAndReschedule(){let e=await this.resilience.getItemCount();e>0&&this.scheduler.schedule({immediate:e>=this.options.batchFlushSize})}async scheduleLongCallBack(e){let t=(0,n("bR5nb").default)(this.queuePrefix);this.metricsCollector.addToPurgedQueuesMetrics(t);let r=await (0,n("beet7").default)(this.queuePrefix,async e=>{let t=e.map(e=>({item:e.item,retryAttempts:e.attemptNumber,id:e.id})),{items:r}=await this.resilience.bulkAddItem(t,n("gKFhB").GuardPolicy.IGNORE);return r.length===t.length?{status:"successful"}:{status:"partial",acceptedItemIds:r.map(e=>e.id)}});this.metricsCollector.addToReclaimMetrics(r),await this.checkEventCountAndReschedule(),e(n("feAgz").DoneState.SUCCESS),this.longPollingScheduler.schedule()}flush(e,t){this.metricsCollector.setResilienceMechanism(this.resilience.storeType());let{batchFlushCallback:r}=this;if(!r)throw Error("batchFlushCallback has not been set. Call PullBatchableQueue#start first.");return new Promise((s,i)=>{if(e.length<=0){s(n("feAgz").DoneState.NOOP);return}let a=e.map(e=>{let t=e.item;return e.retryAttempts>0&&t.msg&&(t.msg._metadata||(t.msg._metadata={}),t.msg._metadata.failedAttempts=e.retryAttempts),t});r(a,e=>{e?(t.numberOfDeletedItems>0&&this.metricsCollector.addToItemsDiscardedByRetryCounter(t.numberOfDeletedItems),i(e)):s(n("feAgz").DoneState.SUCCESS)})})}buildOptions(e){return{backoffFactor:(null==e?void 0:e.backoffFactor)||l.backoffFactor,backoffJitterPercentage:(null==e?void 0:e.backoffJitterPercentage)!==void 0?e.backoffJitterPercentage:l.backoffJitterPercentage,batchFlushSize:(null==e?void 0:e.batchFlushSize)||l.batchFlushSize,flushBeforeUnload:(null==e?void 0:e.flushBeforeUnload)||l.flushBeforeUnload,flushWaitMs:(null==e?void 0:e.flushWaitMs)||l.flushWaitMs,maxItems:(null==e?void 0:e.maxItems)||l.maxItems,maxAttempts:(null==e?void 0:e.maxAttempts)||l.maxAttempts,maxRetryDelay:(null==e?void 0:e.maxRetryDelay)||l.maxRetryDelay,minRetryDelay:(null==e?void 0:e.minRetryDelay)||l.minRetryDelay}}}}),a("bR5nb",function(t,r){e(t.exports,"default",()=>i);let s=Object.values(n("4RWKr").LocalStorageKeySuffix);var i=e=>{if("string"!=typeof e||0===e.length)return 0;try{let t=Object.keys(localStorage).filter(t=>t&&t.startsWith(`${e}.`)||!1).map(e=>e.split(".")).filter(e=>3===e.length&&s.includes(e[2])).reduce((e,t)=>{let[,r,s]=t;return void 0===e[r]&&(e[r]={}),e[r][s]=!0,e},{}),r=Object.keys(t).filter(e=>!0!==t[e][n("4RWKr").LocalStorageKeySuffix.ACK]);return r.forEach(t=>{let{queue:r,inProgress:s,reclaimStart:i,reclaimEnd:a}=(0,n("eACNI").createLocalStorageKeys)(e,t);localStorage.removeItem(s),localStorage.removeItem(r),localStorage.removeItem(i),localStorage.removeItem(a)}),r.length}catch(e){}return 0}}),a("4RWKr",function(t,r){var s,i;e(t.exports,"LocalStorageKeySuffix",()=>n),e(t.exports,"Timers",()=>a);let n=((s={}).IN_PROGRESS="inProgress",s.QUEUE="queue",s.RECLAIM_START="reclaimStart",s.RECLAIM_END="reclaimEnd",s.ACK="ack",s),a=((i={})[i.RECLAIM_TIMEOUT=1e4]="RECLAIM_TIMEOUT",i[i.RECLAIM_WAIT=500]="RECLAIM_WAIT",i[i.RECLAIM_WAIT_THRESHOLD=2e3]="RECLAIM_WAIT_THRESHOLD",i)}),a("eACNI",function(t,r){e(t.exports,"createLocalStorageKeys",()=>s);let s=(e,t)=>({[n("4RWKr").LocalStorageKeySuffix.ACK]:`${e}.${t}.${n("4RWKr").LocalStorageKeySuffix.ACK}`,[n("4RWKr").LocalStorageKeySuffix.QUEUE]:`${e}.${t}.${n("4RWKr").LocalStorageKeySuffix.QUEUE}`,[n("4RWKr").LocalStorageKeySuffix.IN_PROGRESS]:`${e}.${t}.${n("4RWKr").LocalStorageKeySuffix.IN_PROGRESS}`,[n("4RWKr").LocalStorageKeySuffix.RECLAIM_START]:`${e}.${t}.${n("4RWKr").LocalStorageKeySuffix.RECLAIM_START}`,[n("4RWKr").LocalStorageKeySuffix.RECLAIM_END]:`${e}.${t}.${n("4RWKr").LocalStorageKeySuffix.RECLAIM_END}`})}),a("beet7",function(r,s){e(r.exports,"default",()=>f);var i=n("5zQU9"),a=n("dFBS3");function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){(0,i.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let c=e=>new Promise(t=>{setTimeout(t,e)}),u=e=>{try{return Object.keys(localStorage).filter(t=>t.startsWith(e)).map(e=>e.split(".")).filter(t=>{if(3===t.length&&t[0]===e&&t[2]===n("4RWKr").LocalStorageKeySuffix.ACK)try{let e=localStorage.getItem(t.join("."));if(e){let t=parseInt(e);return n("4RWKr").Timers.RECLAIM_TIMEOUT+t<Date.now()}}catch(e){}return!1}).map(e=>e[1])}catch(e){}return[]},d=async(e,t)=>{let{ack:r,reclaimStart:s,reclaimEnd:i}=e.storageKeys,a=Date.now();if(localStorage.setItem(s,e.reclaimProcessId),localStorage.setItem(r,a.toString()),await c(n("4RWKr").Timers.RECLAIM_WAIT),Date.now()>a+n("4RWKr").Timers.RECLAIM_WAIT_THRESHOLD||localStorage.getItem(s)!==e.reclaimProcessId)throw Error("Took to long to callback, reclaim abandonded. After reclaimStart.");if(localStorage.setItem(i,e.reclaimProcessId),await c(n("4RWKr").Timers.RECLAIM_WAIT),Date.now()>a+n("4RWKr").Timers.RECLAIM_WAIT_THRESHOLD||localStorage.getItem(s)!==e.reclaimProcessId||localStorage.getItem(i)!==e.reclaimProcessId)throw Error("Took to long to callback, reclaim abandonded. After reclaimEnd.");return h(e,t)},h=async(e,t)=>{let{queue:r,inProgress:s}=e.storageKeys,i=JSON.parse(localStorage.getItem(r)||"[]"),n=JSON.parse(localStorage.getItem(s)||"{}"),a=Object.entries(n).map(([e,t])=>{let r=l(l({},t),{},{attemptNumber:t.attemptNumber+1,id:e});return r}),o=[...i,...a];if(o.length>0){let i=await t(o);if("successful"===i.status)p(e.storageKeys);else if("partial"===i.status){let e=o.filter(e=>!i.acceptedItemIds.includes(e.id));return localStorage.removeItem(s),localStorage.setItem(r,JSON.stringify(e)),{fullReclaim:!1}}}else p(e.storageKeys);return{fullReclaim:!0}},p=e=>{localStorage.removeItem(e.queue),localStorage.removeItem(e.inProgress),localStorage.removeItem(e.reclaimEnd),localStorage.removeItem(e.reclaimStart),localStorage.removeItem(e.ack)};var f=async(e,r)=>{if("string"!=typeof e||0===e.length)return{fullReclaims:0,partialReclaims:0,failedReclaims:0};let s=t(a)(),i=u(e),o=i.map(t=>d({queuePrefix:e,reclaimProcessId:s,storageKeys:(0,n("eACNI").createLocalStorageKeys)(e,t)},r)),l=await Promise.allSettled(o),c=l.filter(e=>"rejected"===e.status),h=l.filter(e=>"fulfilled"===e.status).map(e=>e.value),p=h.filter(e=>e.fullReclaim),f=h.filter(e=>!e.fullReclaim);return{failedReclaims:c.length,partialReclaims:f.length,fullReclaims:p.length}}}),a("dJ5oQ",function(t,r){e(t.exports,"CallbackProcessingErrorName",()=>s),e(t.exports,"default",()=>i);let s="CallbackProcessingError";class i extends Error{constructor(e){let t=e&&"object"==typeof e&&"toString"in e&&"function"==typeof e.toString&&e.toString(),r=t||"string"==typeof e&&e||"Argument passed to CallbackProcessingError was not an Error or string.";super(`Error thrown while processing events in callback: ${r}`),Object.setPrototypeOf(this,i.prototype),this.name=s}}}),a("IlgzD",function(t,r){e(t.exports,"default",()=>s);var s=n("kI8Xv").default}),a("kI8Xv",function(t,r){e(t.exports,"default",()=>s);class s{constructor(e,t={}){if(this.namespace=e,this.options=(0,n("20tEp").createOptionsWithDefaults)(t),!e||0===e.length||"string"!=typeof e)throw Error("Invalid namespace provided");this.resilience=this.getResilienceMechanism(e,t)}getResilienceMechanism(e,t){if(!t.useMemory)try{return new(n("eY6Jo")).default(e,t)}catch(e){if(!(e instanceof n("8i80Y").default)){var r;null===(r=t.logger)||void 0===r||r.warn("Attempted to create IndexedDbResilience but failed. Using memory instead.")}}return new(n("9vF9y")).default(this.namespace,t)}addItem(e,t,r=n("gKFhB").GuardPolicy.ABANDON){return this.runOrFailOver(()=>this.resilience.addItem(e,t,r))}bulkAddItem(e,t=n("gKFhB").GuardPolicy.ABANDON){return this.runOrFailOver(()=>this.resilience.bulkAddItem(e,t))}getItems(e){return this.runOrFailOver(()=>this.resilience.getItems(e))}deleteItems(e){return this.runOrFailOver(()=>this.resilience.deleteItems(e))}getItemCount(){return this.runOrFailOver(()=>this.resilience.getItemCount())}processItems(e,t){return this.runOrFailOver(()=>this.resilience.processItems(e,t))}storeType(){return this.resilience.storeType()}async runOrFailOver(e){try{return await e()}catch(t){if((0,n("aI6sO").shouldIgnoreResilienceDbError)(t))throw t;return this.resilience.storeType()===n("gKFhB").StoreType.INDEXEDDB&&await this.failOver(),e()}}async failOver(){let e=this.resilience,t=new(n("9vF9y")).default(this.namespace,this.options);this.resilience=t;try{let{items:r}=await e.getItems(this.options.maxEventLimit);if(r.length>0){let s=await t.bulkAddItemWrapperType(r,n("gKFhB").GuardPolicy.IGNORE),i=s.items.map(e=>e.id);await e.deleteItems(i)}}catch(e){this.options.logger.warn("Unexpected error from ResilienceDb, switching to MemoryDb")}}}}),a("gKFhB",function(t,r){var s,i;e(t.exports,"NAMESPACE_AND_TIME_ADDED_INDEX",()=>n),e(t.exports,"RESILIENCE_DB_NAME",()=>a),e(t.exports,"RESILIENCE_STORE_NAME",()=>o),e(t.exports,"TIME_TO_PROCESS_AFTER_INDEX",()=>l),e(t.exports,"TIME_ADDED_INDEX",()=>c),e(t.exports,"RETRY_INDEX",()=>u),e(t.exports,"INDEXEDDB_TIMEOUT",()=>d),e(t.exports,"StoreType",()=>h),e(t.exports,"GuardPolicy",()=>p);let n="namespace-timeAdded",a="analytics-web-client",o="analytics-resilience",l="timeToBeProcessedAfter",c="timeAdded",u="retryAttempts",d=15e3,h=((s={}).INDEXEDDB="indexeddb",s.MEMORY="memory",s),p=((i={}).IGNORE="ignore",i.ABANDON="abandon",i.EVICT="evict",i)}),a("8i80Y",function(t,r){e(t.exports,"default",()=>s);class s extends Error{constructor(){super("window.indexeddb is undefined."),Object.setPrototypeOf(this,s.prototype),this.name="NoIndexedDbError"}}}),a("aI6sO",function(t,r){e(t.exports,"shouldIgnoreResilienceDbError",()=>s);let s=e=>!!e&&"object"==typeof e&&"name"in e&&"string"==typeof e.name&&(e.name===n("cjuzB").AbandonWriteErrorName||e.name===n("dJ5oQ").CallbackProcessingErrorName||e.name===n("fFUMz").InvalidPolicyErrorName)}),a("cjuzB",function(t,r){e(t.exports,"AbandonWriteErrorName",()=>s),e(t.exports,"default",()=>i);let s="AbandonWriteError";class i extends Error{constructor(e){super(`Event Limit reached. Abandoning write to: ${e}`),Object.setPrototypeOf(this,i.prototype),this.name=s}}}),a("fFUMz",function(t,r){e(t.exports,"InvalidPolicyErrorName",()=>s),e(t.exports,"default",()=>i);let s="InvalidPolicyError";class i extends Error{constructor(e,t){super(`Method '${t}' cannot be called with policy '${e}'.`),this.name=s}}}),a("eY6Jo",function(t,r){e(t.exports,"default",()=>c);var s=n("bwPfh"),i=n("5zQU9");let a=["item"],o=["items"];function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}class c{constructor(e,t={}){if((0,i.default)(this,"startDB",async()=>new Promise(async(e,t)=>{if("undefined"!=typeof window){let r=window.setTimeout(()=>{this.logger.warn("IndexedDB timed out."),t(new(n("8i80Y")).default)},n("gKFhB").INDEXEDDB_TIMEOUT),s=window.indexedDB.open(n("gKFhB").RESILIENCE_DB_NAME,1);s.onupgradeneeded=e=>{if(0!==e.oldVersion)throw Error("We cannot upgrade the database. Do not do this.");let t=s.result,r=t.createObjectStore(n("gKFhB").RESILIENCE_STORE_NAME,{keyPath:"id"});r.createIndex(n("gKFhB").TIME_TO_PROCESS_AFTER_INDEX,n("gKFhB").TIME_TO_PROCESS_AFTER_INDEX,{unique:!1}),r.createIndex(n("gKFhB").RETRY_INDEX,n("gKFhB").RETRY_INDEX,{unique:!1}),r.createIndex(n("gKFhB").TIME_ADDED_INDEX,n("gKFhB").TIME_ADDED_INDEX,{unique:!1}),r.createIndex(n("gKFhB").NAMESPACE_AND_TIME_ADDED_INDEX,["namespace","timeAdded"],{unique:!1})};try{return await (0,n("20tEp").requestToPromise)(s),e(s.result)}catch(e){this.logger.warn("IndexedDB failed to initialise.",e),t(new(n("8i80Y")).default)}finally{window.clearTimeout(r)}}else this.logger.warn("IndexedDB failed to initialise. No 'window' object."),t(new(n("8i80Y")).default)})),(0,i.default)(this,"addItem",async(e,t={},r=n("gKFhB").GuardPolicy.ABANDON)=>{let{logger:s,namespace:i}=this,a=(0,n("20tEp").convertToItemWrapper)(e,i,t),{objectStore:o}=await this.getObjectStoreAndTransaction("readwrite");if(r===n("gKFhB").GuardPolicy.IGNORE)throw new(n("fFUMz")).default(r,"IndexedDbConnector#addItem");try{if(!a.namespace||0===a.namespace.length||"string"!=typeof a.namespace)throw Error("Namespace not specified");let e=await this.globalEventLimitGuard.insertItems(o,[a],r);if(1===e.items.length)return{item:e.items[0],numberOfEvictedItems:e.numberOfEvictedItems};throw Error(`Incorrect number of items added. Expected: 1, got: ${e.items.length}`)}catch(e){if((0,n("aI6sO").shouldIgnoreResilienceDbError)(e))throw e;throw s.log("Failed to add item to table",e),Error("Request to add item to table failed")}}),(0,i.default)(this,"bulkAddItem",async(e,t=n("gKFhB").GuardPolicy.ABANDON)=>{let{logger:r,namespace:i}=this,o=e.map(e=>{let{item:t}=e,r=(0,s.default)(e,a);return(0,n("20tEp").convertToItemWrapper)(t,i,r)}),{objectStore:l}=await this.getObjectStoreAndTransaction("readwrite");try{return await this.globalEventLimitGuard.insertItems(l,o,t)}catch(e){if((0,n("aI6sO").shouldIgnoreResilienceDbError)(e))throw e;throw r.log("Failed to add item to table",e),Error("Request to add item to table failed")}}),(0,i.default)(this,"getItems",async(e=n("1vRDG").GET_ITEM_COUNT)=>{let t=e>0?e:n("1vRDG").GET_ITEM_COUNT,{logger:r}=this,s=this.options.maxAttempts,{transaction:a,objectStore:o}=await this.getObjectStoreAndTransaction("readwrite"),c=o.index(n("gKFhB").TIME_TO_PROCESS_AFTER_INDEX),u=IDBKeyRange.upperBound(Date.now()),d=c.openCursor(u),h=await new Promise(async(e,a)=>{let o=[],c=0;d.onerror=e=>{r.error("Failed to open cursor:",e),a("Failed to open cursor")},d.onsuccess=a=>{let u=a.target.result;if(u){let a=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){(0,i.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},u.value);o.push(a);let d=u.value;if(d.retryAttempts+=1,d.timeToBeProcessedAfter=Date.now()+n("1vRDG").VISIBILITY_TIMEOUT,d.retryAttempts>=s){++c;let e=u.delete();(0,n("20tEp").monitorErrorsOnRequest)(e,r)}else{let e=u.update(d);(0,n("20tEp").monitorErrorsOnRequest)(e,r)}o.length<t?u.continue():e({items:o,numberOfDeletedItems:c})}else e({items:o,numberOfDeletedItems:c})}});return await (0,n("20tEp").commitTransaction)(a,this.logger),h}),(0,i.default)(this,"deleteItems",async e=>{let{transaction:t,objectStore:r}=await this.getObjectStoreAndTransaction("readwrite");try{let s=e.map(e=>this.deleteItem(r,e));await (0,n("20tEp").commitTransaction)(t,this.logger),await Promise.all(s)}catch(e){throw this.logger.warn("Failed to delete items from indexeddb.",e),e}}),(0,i.default)(this,"getItemCount",async()=>{let{transaction:e,objectStore:t}=await this.getObjectStoreAndTransaction("readonly"),r=t.index(n("gKFhB").TIME_TO_PROCESS_AFTER_INDEX),s=IDBKeyRange.upperBound(Date.now()),i=r.count(s),a=await (0,n("20tEp").requestToPromise)(i);return await (0,n("20tEp").commitTransaction)(e,this.logger),a.target.result}),(0,i.default)(this,"processItems",async(e,t=n("1vRDG").GET_ITEM_COUNT)=>{let r=await this.getItems(t),{items:i}=r,a=(0,s.default)(r,o);try{let t=await e(i,a),r=i.map(e=>e.id);return await this.deleteItems(r),t}catch(e){throw new(n("dJ5oQ")).default(e)}}),(0,i.default)(this,"deleteItem",async(e,t)=>{let{logger:r}=this;try{await (0,n("20tEp").requestToPromise)(e.delete(t))}catch(e){throw r.error("Failed to delete item:",t,e),e}}),(0,i.default)(this,"getObjectStoreAndTransaction",async e=>{let t=(await this.db).transaction(n("gKFhB").RESILIENCE_STORE_NAME,e),r=t.objectStore(n("gKFhB").RESILIENCE_STORE_NAME);return{transaction:t,objectStore:r}}),this.options=(0,n("20tEp").createOptionsWithDefaults)(t),this.namespace=e,this.logger=this.options.logger,!window.indexedDB)throw new(n("8i80Y")).default;this.db=this.startDB(),this.db.catch(()=>{}),this.globalEventLimitGuard=new(n("iyV9N")).default(this.options.maxEventLimit,this.namespace,this.logger,this.deleteItem)}storeType(){return n("gKFhB").StoreType.INDEXEDDB}}}),a("1vRDG",function(t,r){e(t.exports,"GET_ITEM_COUNT",()=>s),e(t.exports,"VISIBILITY_TIMEOUT",()=>i),e(t.exports,"MAX_ATTEMPTS",()=>n),e(t.exports,"EVENT_COUNT_LIMIT",()=>a);let s=7,i=6e4,n=10,a=5e3}),a("iyV9N",function(t,r){e(t.exports,"default",()=>i);var s=n("5zQU9");class i{constructor(e,t,r,i){if((0,s.default)(this,"deleteOldestNEvents",async(e,t)=>{var r;let s=e.index(n("gKFhB").NAMESPACE_AND_TIME_ADDED_INDEX),i=IDBKeyRange.bound([this.namespace,0],[this.namespace,Date.now()]),a=s.getAllKeys(i,t),o=await (0,n("20tEp").requestToPromise)(a),l=null==o?void 0:null===(r=o.target)||void 0===r?void 0:r.result;if(l&&Array.isArray(l)&&l.length>0)try{let t=l.map(t=>this.deleteItemHandler(e,t));await Promise.all(t)}catch(e){throw this.logger.warn("Failed to delete items from indexeddb.",e),e}}),e>0)this.eventLimit=e;else throw Error("Event Limit has to be set higher than 1");this.namespace=t,this.logger=r,this.deleteItemHandler=i}async insertItems(e,t,r=n("gKFhB").GuardPolicy.ABANDON){let s=[...t],i=0;switch(r){case n("gKFhB").GuardPolicy.ABANDON:await this.throwIfNotEnoughSpace(e,t.length);break;case n("gKFhB").GuardPolicy.EVICT:i=await this.evictIfNotEnoughSpace(e,t.length);break;case n("gKFhB").GuardPolicy.IGNORE:await this.calculateHowManyEventsWeCanAdd(e,s)}let a=s.map(t=>(0,n("20tEp").requestToPromise)(e.add(t)));return await Promise.all(a),await (0,n("20tEp").commitTransaction)(e.transaction,this.logger),{items:s,numberOfEvictedItems:i}}async throwIfNotEnoughSpace(e,t){let r=await this.calculateFreeSpace(e);if(r<t)throw new(n("cjuzB")).default(`Not enough space in IndexedDb. Needed ${t} but only had ${r}`)}async evictIfNotEnoughSpace(e,t){let r=await this.calculateFreeSpace(e);if(r<t){let s=t-r;return await this.deleteOldestNEvents(e,s),s}return 0}async calculateHowManyEventsWeCanAdd(e,t){let r=await this.calculateFreeSpace(e);if(r<t.length){let e=t.length-r,s=t.length-e;t.splice(s,e)}}async calculateFreeSpace(e){let t=await this.getCountofEventsInObjectStore(e);return this.eventLimit-t}async getCountofEventsInObjectStore(e){let t=e.index(n("gKFhB").NAMESPACE_AND_TIME_ADDED_INDEX),r=IDBKeyRange.bound([this.namespace,0],[this.namespace,Date.now()]),s=t.count(r),i=await (0,n("20tEp").requestToPromise)(s);return i.target.result}}}),a("20tEp",function(r,s){e(r.exports,"convertToItemWrapper",()=>a),e(r.exports,"createOptionsWithDefaults",()=>o),e(r.exports,"requestToPromise",()=>l),e(r.exports,"commitTransaction",()=>u),e(r.exports,"monitorErrorsOnRequest",()=>d);var i=n("dFBS3");let a=(e,r,{id:s,retryAttempts:n,timeToProcessOffset:a})=>({item:e,id:s||t(i)(),retryAttempts:n||0,timeToBeProcessedAfter:Date.now()+(a||0),namespace:r,timeAdded:Date.now()}),o=e=>({logger:e.logger||console,useMemory:e.useMemory||!1,maxAttempts:e.maxAttempts||n("1vRDG").MAX_ATTEMPTS,maxEventLimit:e.maxEventLimit||n("1vRDG").EVENT_COUNT_LIMIT}),l=e=>new Promise((t,r)=>{e.onsuccess=e=>{t(e)},e.onerror=e=>{r(e)}}),c=e=>new Promise((t,r)=>{e.oncomplete=()=>{t()},e.onerror=e=>{r(e)},e.onabort=e=>{r(e)}}),u=(e,t)=>{try{"function"==typeof e.commit&&e.commit()}catch(e){throw t.error("Failed to force commit transaction:",e),e}return c(e)},d=(e,t)=>{e.onerror=e=>{t.warn("Error thrown from request:",e)}}}),a("9vF9y",function(t,r){e(t.exports,"default",()=>c);var s=n("5zQU9"),i=n("bwPfh");let a=["item"],o=["items"];function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}class c{constructor(e,t={}){this.namespace=e,this.memoryStore=[],this.options=(0,n("20tEp").createOptionsWithDefaults)(t),this.globalEventLimitGuard=new(n("d2F6m")).default(this.options.maxEventLimit,{addItems:this.addItems.bind(this),getItemCount:this.getItemCount.bind(this),evictEventsIfNeeded:this.evictEventsIfNeeded.bind(this)})}async addItem(e,t={},r=n("gKFhB").GuardPolicy.ABANDON){if(r===n("gKFhB").GuardPolicy.IGNORE)throw new(n("fFUMz")).default(r,"IndexedDbConnector#addItem");let s=(0,n("20tEp").convertToItemWrapper)(e,this.namespace,t),i=await this.globalEventLimitGuard.insertItemsToMemoryStore([s],r);return Promise.resolve({item:i.items[0],numberOfEvictedItems:i.numberOfEvictedItems})}bulkAddItem(e,t=n("gKFhB").GuardPolicy.ABANDON){let r=e.map(e=>{let{item:t}=e,r=(0,i.default)(e,a);return(0,n("20tEp").convertToItemWrapper)(t,this.namespace,r)});return this.bulkAddItemWrapperType(r,t)}bulkAddItemWrapperType(e,t=n("gKFhB").GuardPolicy.ABANDON){return Promise.resolve(this.globalEventLimitGuard.insertItemsToMemoryStore(e,t))}getItems(e=n("1vRDG").GET_ITEM_COUNT){return Promise.resolve(this.synchronousGetItems(e))}synchronousGetItems(e=n("1vRDG").GET_ITEM_COUNT){let t=e>0?e:n("1vRDG").GET_ITEM_COUNT,r=Date.now(),i=[],a=[];for(let e of this.memoryStore)if(e.timeToBeProcessedAfter<=r&&(i.push(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){(0,s.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e)),e.timeToBeProcessedAfter+=n("1vRDG").VISIBILITY_TIMEOUT,e.retryAttempts+=1,e.retryAttempts>=this.options.maxAttempts&&a.push(e)),i.length>=t)break;return a.forEach(e=>{let t=this.memoryStore.indexOf(e);this.memoryStore.splice(t,1)}),{items:i,numberOfDeletedItems:a.length}}deleteItems(e){return this.memoryStore=this.memoryStore.filter(t=>!e.includes(t.id)),Promise.resolve(void 0)}getItemCount(){let e=Date.now(),t=this.memoryStore.filter(t=>t.timeToBeProcessedAfter<=e).length;return Promise.resolve(t)}async processItems(e,t){let r=this.synchronousGetItems(t),{items:s}=r,a=(0,i.default)(r,o),l=s.map(e=>e.id);try{let t=await e(s,a);return await this.deleteItems(l),t}catch(e){throw new(n("dJ5oQ")).default(e)}}storeType(){return n("gKFhB").StoreType.MEMORY}addItems(e){this.memoryStore.push(...e),this.memoryStore.sort(function(e,t){return e.timeAdded-t.timeAdded})}evictEventsIfNeeded(e){let t=this.memoryStore.length;if(t>e){let r=t-e;return this.memoryStore.splice(0,r),r}return 0}}}),a("d2F6m",function(t,r){e(t.exports,"default",()=>i);var s=n("5zQU9");class i{constructor(e,t){if((0,s.default)(this,"insertItemsToMemoryStore",(e,t)=>{switch(t){case n("gKFhB").GuardPolicy.ABANDON:return this.handleAbandonIfLimitWillExceedPolicy(e);case n("gKFhB").GuardPolicy.EVICT:return Promise.resolve(this.handleEvictOldestIfLimitExceededPolicy(e));case n("gKFhB").GuardPolicy.IGNORE:return this.handleAddAsManyAsPossible(e)}}),e>0)this.eventLimit=e;else throw Error("Event Limit has to be set higher than 1");this.memoryItemHandlers=t}async handleAbandonIfLimitWillExceedPolicy(e){let t=await this.memoryItemHandlers.getItemCount();if(t+e.length>this.eventLimit)throw new(n("cjuzB")).default(n("gKFhB").StoreType.MEMORY);return this.memoryItemHandlers.addItems(e),{items:e,numberOfEvictedItems:0}}handleEvictOldestIfLimitExceededPolicy(e){this.memoryItemHandlers.addItems(e);let t=this.memoryItemHandlers.evictEventsIfNeeded(this.eventLimit);return{items:e,numberOfEvictedItems:t}}async handleAddAsManyAsPossible(e){let t=this.eventLimit-await this.memoryItemHandlers.getItemCount(),r=t>e.length?e:e.slice(0,t);return this.memoryItemHandlers.addItems(r),{items:r,numberOfEvictedItems:0}}}}),a("j1fnp",function(t,r){e(t.exports,"default",()=>o);var s=n("5zQU9");class i{constructor(){(0,s.default)(this,"itemsDiscardedByRetry",0),(0,s.default)(this,"eventCount",0),(0,s.default)(this,"itemsDiscardedByOverflow",0),(0,s.default)(this,"resilienceMechanism",n("hObqm").ResilienceMechanism.INDEXEDDB),(0,s.default)(this,"localstorageNumberOfQueuesPurged",0),(0,s.default)(this,"localstorageNumberOfFullReclaims",0),(0,s.default)(this,"localstorageNumberOfPartialReclaims",0),(0,s.default)(this,"localstorageNumberOfFailedReclaims",0)}addToItemsDiscardedByRetryCounter(e=1){this.itemsDiscardedByRetry+=e}addToEventCount(){this.eventCount++}addToItemsDiscardedByOverflowCounter(e=1){this.itemsDiscardedByOverflow+=e}setResilienceMechanism(e){this.resilienceMechanism=e}addToReclaimMetrics(e){this.localstorageNumberOfFullReclaims+=e.fullReclaims,this.localstorageNumberOfPartialReclaims+=e.partialReclaims,this.localstorageNumberOfFailedReclaims+=e.failedReclaims}addToPurgedQueuesMetrics(e){this.localstorageNumberOfQueuesPurged+=e}subtractFromMetrics(e){this.itemsDiscardedByRetry=this.subtractFromCount(this.itemsDiscardedByRetry,e.itemsDiscardedByRetry),this.eventCount=this.subtractFromCount(this.eventCount,e.eventCount),this.itemsDiscardedByOverflow=this.subtractFromCount(this.itemsDiscardedByOverflow,e.itemsDiscardedByOverflow),this.localstorageNumberOfFullReclaims=this.subtractFromCount(this.localstorageNumberOfFullReclaims,e.fullReclaims),this.localstorageNumberOfPartialReclaims=this.subtractFromCount(this.localstorageNumberOfPartialReclaims,e.partialReclaims),this.localstorageNumberOfFailedReclaims=this.subtractFromCount(this.localstorageNumberOfFailedReclaims,e.failedReclaims),this.localstorageNumberOfQueuesPurged=this.subtractFromCount(this.localstorageNumberOfQueuesPurged,e.localstorageQueuesPurged)}subtractFromCount(e,t){return Math.max(e-(t||0),0)}getMetricsPayload(){return{itemsDiscardedByRetry:this.itemsDiscardedByRetry,eventCount:this.eventCount,itemsDiscardedByOverflow:this.itemsDiscardedByOverflow,resilienceMechanism:this.resilienceMechanism,localstorageQueuesPurged:this.localstorageNumberOfQueuesPurged,fullReclaims:this.localstorageNumberOfFullReclaims,partialReclaims:this.localstorageNumberOfPartialReclaims,failedReclaims:this.localstorageNumberOfFailedReclaims}}}let a=null;var o=()=>(a||(a=new i),a)}),a("hObqm",function(t,r){var s,i;e(t.exports,"ResilienceMechanism",()=>n),e(t.exports,"NetworkStatusEnum",()=>a);let n=((s={}).INDEXEDDB="indexeddb",s.MEMORY="memory",s),a=((i={})[i.ONLINE=0]="ONLINE",i[i.OFFLINE=1]="OFFLINE",i)}),a("4g0Nt",function(t,r){e(t.exports,"default",()=>s);class s{constructor(e){"undefined"!=typeof window&&(window.addEventListener("offline",()=>e(n("hObqm").NetworkStatusEnum.OFFLINE)),window.addEventListener("online",()=>e(n("hObqm").NetworkStatusEnum.ONLINE)))}getNetworkStatus(){return window.navigator.onLine?n("hObqm").NetworkStatusEnum.ONLINE:n("hObqm").NetworkStatusEnum.OFFLINE}}}),a("9XgvA",function(t,r){e(t.exports,"default",()=>l);var s,i=n("5zQU9");let a={minRetryDelay:1e3,maxRetryDelay:3e4,backoffFactor:2,backoffJitterPercentage:0,waitInterval:500,callbackTimeoutPeriod:5e3},o=((s={})[s.NONE=0]="NONE",s[s.IMMEDIATE=1]="IMMEDIATE",s[s.WAIT=2]="WAIT",s);class l{constructor(e,t){(0,i.default)(this,"schedule",({immediate:e}={immediate:!1})=>{"undefined"!=typeof window&&(this.operationInFlight?e?this.queuedSchedule=o.IMMEDIATE:this.queuedSchedule!==o.IMMEDIATE&&(this.queuedSchedule=o.WAIT):(e||this.options.waitInterval<=0)&&0===this.failureCount?(this.clearTimeout(),this.run()):this.failureCount>0&&null===this.scheduledTimeout?this.scheduledTimeout=window.setTimeout(this.run,this.calculateBackoff()):null===this.scheduledTimeout&&(this.scheduledTimeout=window.setTimeout(this.run,this.options.waitInterval)))}),(0,i.default)(this,"stop",()=>{this.clearTimeout(),this.queuedSchedule=o.NONE}),(0,i.default)(this,"getFailureCount",()=>this.failureCount),(0,i.default)(this,"getCallbackStatus",()=>this.callbackTimer.getCallbackStatus()),(0,i.default)(this,"clearTimeout",()=>{"undefined"!=typeof window&&null!==this.scheduledTimeout&&(window.clearTimeout(this.scheduledTimeout),this.scheduledTimeout=null)}),(0,i.default)(this,"run",()=>{this.operationInFlight=!0,this.clearTimeout();try{this.callbackTimer.executeCallbackWithTimeout(this.callback,this.done,()=>this.done(n("feAgz").DoneState.ERROR))}catch(e){this.done(e)}}),(0,i.default)(this,"done",e=>{this.operationInFlight=!1,e===n("feAgz").DoneState.ERROR||this.callbackTimer.getCallbackStatus()===n("3LYuU").CallbackStatus.TIMED_OUT?(this.failureCount++,this.clearTimeout()):e===n("feAgz").DoneState.SUCCESS&&(this.failureCount=0),this.processQueuedSchedule()}),(0,i.default)(this,"processQueuedSchedule",()=>{if(this.queuedSchedule!==o.NONE){let e=this.queuedSchedule===o.IMMEDIATE;this.queuedSchedule=o.NONE,this.schedule({immediate:e})}else this.failureCount>0&&this.schedule()}),(0,i.default)(this,"calculateBackoff",()=>{let{minRetryDelay:e,maxRetryDelay:t,backoffFactor:r,backoffJitterPercentage:s}=this.options,i=e*r**this.failureCount;if(s){let e=Math.random(),t=Math.floor(e*s*i);5>Math.floor(10*e)?i-=t:i+=t}return Number(Math.min(i,t).toPrecision(1))}),this.options={minRetryDelay:e.minRetryDelay||a.minRetryDelay,maxRetryDelay:e.maxRetryDelay||a.maxRetryDelay,backoffFactor:e.backoffFactor||a.backoffFactor,backoffJitterPercentage:e.backoffJitterPercentage||a.backoffJitterPercentage,waitInterval:void 0!==e.waitInterval?e.waitInterval:a.waitInterval,callbackTimeoutPeriod:e.callbackTimeoutPeriod||a.callbackTimeoutPeriod},this.scheduledTimeout=null,this.failureCount=0,this.callback=t,this.operationInFlight=!1,this.queuedSchedule=o.NONE,this.callbackTimer=new(n("3LYuU")).CallbackWithTimeout(this.options.callbackTimeoutPeriod)}}}),a("3LYuU",function(t,r){e(t.exports,"CallbackStatus",()=>o),e(t.exports,"CallbackWithTimeout",()=>c);var s,i,a=n("5zQU9");let o=((s={}).IDLE="idle",s.RUNNING="running",s.COMPLETED="completed",s.TIMED_OUT="timedOut",s),l=((i={}).EXECUTE="execute",i.COMPLETE="complete",i.TIMEOUT="timeout",i);class c{constructor(e){if((0,a.default)(this,"timeoutHandle",void 0),(0,a.default)(this,"callbackStatus",o.IDLE),e>0){this.timeoutPeriod=e;return}throw Error("CallbackWithTimeout requires timeout period higher than 0")}transitionCallbackStatus(e,t){switch(e){case o.IDLE:case o.TIMED_OUT:case o.COMPLETED:t===l.EXECUTE&&(this.callbackStatus=o.RUNNING);break;case o.RUNNING:switch(t){case l.COMPLETE:this.callbackStatus=o.COMPLETED;break;case l.TIMEOUT:this.callbackStatus=o.TIMED_OUT}break;default:this.callbackStatus=e}}executeCallbackWithTimeout(e,t,r){"undefined"!=typeof window&&(this.transitionCallbackStatus(this.callbackStatus,l.EXECUTE),this.timeoutHandle=window.setTimeout(()=>{this.transitionCallbackStatus(this.callbackStatus,l.TIMEOUT),r()},this.timeoutPeriod),e(e=>{this.cancelTimeout(),this.getCallbackStatus()!==o.TIMED_OUT&&(this.transitionCallbackStatus(this.callbackStatus,l.COMPLETE),t(e))}))}getCallbackStatus(){return this.callbackStatus}cancelTimeout(){"undefined"!=typeof window&&this.timeoutPeriod>0&&this.timeoutHandle&&(window.clearTimeout(this.timeoutHandle),this.timeoutHandle=void 0)}}}),a("feAgz",function(t,r){var s;e(t.exports,"DoneState",()=>i);let i=((s={})[s.NOOP=0]="NOOP",s[s.SUCCESS=1]="SUCCESS",s[s.ERROR=2]="ERROR",s)}),a("buuYU",function(t,r){e(t.exports,"attachXidToMultipleEvents",()=>o);var s=n("5zQU9");function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){(0,s.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}async function o(e,t){try{let r=await t;return e.map(e=>(function(e,t){if(!(t&&t instanceof Function))return e;if(e.msg.type===n("6gNKz").SegmentEventTypes.PAGE||e.msg.type===n("6gNKz").SegmentEventTypes.TRACK){let r=t();r&&Array.isArray(r)&&(e.msg.properties=a(a({},e.msg.properties),{},{xid:r}))}else if(e.msg.traits&&e.msg.type===n("6gNKz").SegmentEventTypes.IDENTIFY){let r=t();r&&Array.isArray(r)&&(e.msg.traits=a(a({},e.msg.traits),{},{xid:r}))}return e})(e,r))}catch(t){return e}}}),a("6gNKz",function(t,r){var s,i,n;e(t.exports,"SegmentEventTypes",()=>a);let a=((s={}).IDENTIFY="identify",s.PAGE="page",s.TRACK="track",s);(i={}).XC="xc",i.UID="uid",(n={}).NEW="NEW",n.CHANGED="CHANGED",n.EXISTING="EXISTING",n.TIMEOUT="TIMEOUT",n.ERROR="ERROR",n.UNAVAILABLE="UNAVAILABLE",n.MALFORMED="MALFORMED",n.UNKNOWN="UNKNOWN"}),a("dhCt2",function(t,r){e(t.exports,"DEFAULT_REQUEST_TIMEOUT",()=>s);let s=1e4}),a("bpctN",function(t,r){e(t.exports,"sendEvents",()=>a);var s=n("5zQU9");function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}let a=async e=>{var t;let r=null===(t=o(e))||void 0===t?void 0:t.signal,n=l(e.url),a=await fetch(e.url,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){(0,s.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({method:"POST",headers:{"Content-Type":"text/plain"},body:JSON.stringify(e.batch),signal:r},n));if(429===a.status||a.status>=500&&a.status<600)throw Error(`HTTP Error ${a.status} (${a.statusText})`);return a},o=e=>{if(e.abortController)return e.abortController;if(e.timeout){let t=new AbortController;return setTimeout(()=>{t.abort()},e.timeout),t}},l=(0,n("5iWql").default)(e=>{let t=new URL(e).origin;return t===location.origin?{}:{mode:"cors",credentials:"include"}})}),a("5UpLh",function(r,s){e(r.exports,"default",()=>c);var i=n("dFBS3");let a="SAFE",o="UNSAFE",l="LOCAL_STORAGE";class c{constructor(e){this.store=new(n("empVP")).default({useStoragePrefix:!1}),this.cookie=new(n("iUe7A")).default(e)}getUserId(){return this.userId||null}setUserId(e){this.userId=e}getAnonymousId(e){return this.getAnonymousIdFromLocalStorageAndUpdateCookieIfStale()||this.getAnonymousIdFromCookieAndUpdateLocalStorage()||this.generateNewAnonymousId(e)}setAnonymousId(e){let t=JSON.stringify(e);return this.cookie.set(n("eSBJq").AWCCookiesKeys.AJS_ANONYMOUS_ID,t),this.lastAnonymousIdCookieUpdate=Date.now(),this.store.setItem((0,n("eSBJq").AllAnalyticsCookies).AJS_ANONYMOUS_ID.getKey(),t)}getAnonymousIdFromStorage(e){let t=e===l?this.store.getItem((0,n("eSBJq").AllAnalyticsCookies).AJS_ANONYMOUS_ID.getKey()):this.cookie.get(n("eSBJq").AWCCookiesKeys.AJS_ANONYMOUS_ID);if(t){let e={type:o,anonymousId:t};try{let r=JSON.parse(t);if(r&&"string"==typeof r)return{type:a,anonymousId:r};return e}catch(t){return e}}return{type:"NOT_FOUND"}}getAnonymousIdFromLocalStorageAndUpdateCookieIfStale(){let e=this.getAnonymousIdFromStorage(l),t=!1;switch((!this.lastAnonymousIdCookieUpdate||(0,n("d2wNG").default)(new Date,new Date(this.lastAnonymousIdCookieUpdate))>=7)&&(t=!0),e.type){case a:return t&&this.setAnonymousId(e.anonymousId),e.anonymousId;case o:return e.anonymousId;default:return null}}getAnonymousIdFromCookieAndUpdateLocalStorage(){let e=this.getAnonymousIdFromStorage("COOKIE");switch(e.type){case a:case o:return this.store.setItem((0,n("eSBJq").AllAnalyticsCookies).AJS_ANONYMOUS_ID.getKey(),JSON.stringify(e.anonymousId)),e.anonymousId;default:return null}}generateNewAnonymousId(e=t(i)){let r=e();return this.setAnonymousId(r),r}}}),a("eSBJq",function(t,r){var s;e(t.exports,"AWCCookiesKeys",()=>i),e(t.exports,"AllAnalyticsCookies",()=>a);let i=((s={}).AWC_TLD_TEST="AWC_TLD_TEST",s.AWC_ANALYTICS_DEBUG="AWC_ANALYTICS_DEBUG",s.AJS_ANONYMOUS_ID="AJS_ANONYMOUS_ID",s);class n{constructor(e,t){this.key=e,this.options=t}getAttributes(){return this.options}getKey(){return this.key}}let a={[i.AWC_TLD_TEST]:new n("__awc_tld_test__",{expires:365,secure:"https:"===window.location.protocol,path:"/"}),[i.AWC_ANALYTICS_DEBUG]:new n("atlassian_analytics_debug",{expires:365,secure:"https:"===window.location.protocol,path:"/"}),[i.AJS_ANONYMOUS_ID]:new n("ajs_anonymous_id",{expires:365,secure:"https:"===window.location.protocol,path:"/"})}}),a("iUe7A",function(r,s){e(r.exports,"default",()=>c);var i=n("5zQU9"),a=n("M2DFp");function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){(0,i.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}class c{constructor(e){this.cookieLike=(0,n("4ieaT").canUseCookie)(e)?t(a):new(n("3GvaU")).default}set(e,t,r){if(!n("eSBJq").AllAnalyticsCookies[e]){console.warn(`Unknown cookie key ${e} provided, not set.`);return}return this.cookieLike.set((0,n("eSBJq").AllAnalyticsCookies)[e].getKey(),t,l(l({},(0,n("eSBJq").AllAnalyticsCookies)[e].getAttributes()),{},{domain:(0,n("4ieaT").getTld)()},r))}get(e){if(!n("eSBJq").AllAnalyticsCookies[e]){console.warn(`Unknown cookie key ${e} provided, not fetched.`);return}return this.cookieLike.get((0,n("eSBJq").AllAnalyticsCookies)[e].getKey())}remove(e,t){if(!n("eSBJq").AllAnalyticsCookies[e]){console.warn(`Unknown cookie key ${e} provided, not removed.`);return}this.cookieLike.remove((0,n("eSBJq").AllAnalyticsCookies)[e].getKey(),l({},t))}}}),a("3GvaU",function(t,r){e(t.exports,"default",()=>s);class s{constructor(){this.safeStorage=new(n("empVP")).default({useStoragePrefix:!1})}set(e,t){return this.safeStorage.setItem(e,t),t}get(e){let t=this.safeStorage.getItem(e);return t||void 0}remove(e){this.safeStorage.removeItem(e)}}}),a("empVP",function(t,r){e(t.exports,"default",()=>s);class s extends n("asdds").default{constructor(e){let t;try{t=window.localStorage||n("6PZgF").default}catch(e){t=n("6PZgF").default}super(t,e)}}}),a("6PZgF",function(t,r){e(t.exports,"default",()=>i);var s=n("5zQU9"),i=new class{constructor(){(0,s.default)(this,"_data",{}),(0,s.default)(this,"length",0),(0,s.default)(this,"setItem",(e,t)=>(this._data[e]=t,this.length=Object.keys(this._data).length,t)),(0,s.default)(this,"getItem",e=>e in this._data?this._data[e]:null),(0,s.default)(this,"removeItem",e=>(e in this._data&&delete this._data[e],this.length=Object.keys(this._data).length,null)),(0,s.default)(this,"clear",()=>{this._data={},this.length=0}),(0,s.default)(this,"key",e=>Object.keys(this._data)[e])}}}),a("asdds",function(t,r){e(t.exports,"default",()=>o);var s=n("5zQU9");let i="awcInMemoryStorageFallback";function a(e){let t="test_value";if(!e)return!1;try{let r="awc.storage.support";e.setItem(r,t);let s=e.getItem(r);return e.removeItem(r),s===t}catch(e){return!1}}class o{constructor(e,t={}){(0,s.default)(this,"getStore",()=>this._store),(0,s.default)(this,"getItem",e=>this._store.getItem(this.createKey(e))),(0,s.default)(this,"removeItem",e=>this._store.removeItem(this.createKey(e))),(0,s.default)(this,"setItem",(e,t)=>{try{this._store.setItem(this.createKey(e),t)}catch(r){(function(e){let t=!1;if(e.code)switch(e.code){case 22:t=!0;break;case 1014:"NS_ERROR_DOM_QUOTA_REACHED"===e.name&&(t=!0)}else -2147024882===e.number&&(t=!0);return t})(r)&&(this.swapToInMemory(),this._store.setItem(this.createKey(e),t))}}),(0,s.default)(this,"swapToInMemory",()=>{let e;if(this._store===n("6PZgF").default||"undefined"==typeof window)return;let t=Object.keys(this._store||{});a(window[i])?e=window[i]:(e=n("6PZgF").default,window[i]||(window[i]=n("6PZgF").default)),t.forEach(t=>{if(0===t.indexOf(this.getPrefix())){let r=this._store.getItem(t);r&&e.setItem(t,r)}}),this._store=e}),(0,s.default)(this,"clear",()=>this._store.clear()),(0,s.default)(this,"key",e=>this._store.key(e)),(0,s.default)(this,"getPrefix",()=>this._prefix),(0,s.default)(this,"createKey",e=>this._prefix?`${this.getPrefix()}.${e}`:e),this.options=t;let r=[];(void 0===t.useStoragePrefix||t.useStoragePrefix)&&r.push("awc"),t.envPrefix&&t.envPrefix!==n("hRleJ").envType.PROD&&r.push(t.envPrefix),this._prefix=r.join("-"),a(e)?this._store=e:this.swapToInMemory()}}}),a("4ieaT",function(r,s){e(r.exports,"canUseCookie",()=>a),e(r.exports,"getTld",()=>c);var i=n("M2DFp");let a=(e=!1)=>!e&&!("file:"===location.protocol||"chrome-extension:"===location.protocol),o=(0,n("eSBJq").AllAnalyticsCookies).AWC_TLD_TEST.getKey(),l="tld_test",c=(0,n("5iWql").default)(()=>{if("undefined"==typeof location)return"";let{hostname:e}=location,r=e.split(".");for(let e=1;e<=r.length;e++){let s=r.slice(-1*e),n=`.${s.join(".")}`;if(t(i).set(o,l,{domain:n}),t(i).get(o)===l)return t(i).remove(o,{domain:n}),n}return e})}),a("kPI67",function(r,s){e(r.exports,"buildContext",()=>c),e(r.exports,"prepareEventProperties",()=>u);var i=n("5zQU9"),a=n("kpOtk");function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){(0,i.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let c=e=>l(l({},e.context),{},{userAgent:navigator.userAgent}),u=e=>{let r=d(e);return t(a)(r)},d=e=>{if(null===e||"object"!=typeof e)return e;let t={};return Object.keys(e).forEach(r=>{let s=h(e,r);void 0!==s&&(Array.isArray(s)?t[r]=s.map(e=>d(e)):"object"==typeof s&&null!==s?t[r]=d(s):t[r]=s)}),t},h=(e,t)=>e[t]}),a("b88ir",function(t,r){e(t.exports,"default",()=>i);var s=n("5zQU9");class i{constructor(){(0,s.default)(this,"handleOriginParameters",(e,t)=>{let r=Object.keys(e);if(!(r.length>0))throw Error("Empty parameter mapping provided");let s=r.filter(e=>0>Object.values(n("hRleJ").originTracingType).indexOf(e));if(s.length>0)throw Error(`Invalid Origin Tracing Parameter(s) supplied: ${s.join()}!`);let i=(0,n("8TuVU").default)((e,t)=>r.indexOf(t)>=0,t),a=Object.keys(i).map(t=>{let r=e[t](i[t]);return{[t]:r}}).reduce((e,t)=>Object.assign(e,t),{});return a}),this._originStore={}}}}),a("8TuVU",function(t,r){e(t.exports,"defaultHistoryReplaceFn",()=>i),e(t.exports,"default",()=>a);var s=n("4ea7H");let i=e=>window.history.replaceState({},"",e);var a=(e,t=i)=>{let r=window.location.href,a=window.location.hash,o=""!==a?r.replace(a,""):r,{url:l,query:c}=(0,s.parseUrl)(o),u=(0,n("eaJEm").pickBy)(c,e);if(Object.keys(u).length>0){let r=(0,n("eaJEm").omitBy)(c,e);if(Object.keys(r).length>0){let e=`${l}?${(0,s.stringify)(r)}${a}`;t(e)}else t(`${l}${a}`)}return u}}),a("4ea7H",function(t,r){e(t.exports,"extract",()=>s,e=>s=e),e(t.exports,"parse",()=>i,e=>i=e),e(t.exports,"stringify",()=>a,e=>a=e),e(t.exports,"parseUrl",()=>o,e=>o=e),e(t.exports,"stringifyUrl",()=>l,e=>l=e),e(t.exports,"pick",()=>c,e=>c=e),e(t.exports,"exclude",()=>u,e=>u=e);var s,i,a,o,l,c,u,d=n("hXDaG"),h=n("bJEvY"),p=n("9CHQr"),f=n("aARfw");let g=e=>null==e,m=Symbol("encodeFragmentIdentifier");function y(e){if("string"!=typeof e||1!==e.length)throw TypeError("arrayFormatSeparator must be single character string")}function v(e,t){return t.encode?t.strict?d(e):encodeURIComponent(e):e}function E(e,t){return t.decode?h(e):e}function b(e){let t=e.indexOf("#");return -1!==t&&(e=e.slice(0,t)),e}function I(e){e=b(e);let t=e.indexOf("?");return -1===t?"":e.slice(t+1)}function T(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):t.parseBooleans&&null!==e&&("true"===e.toLowerCase()||"false"===e.toLowerCase())&&(e="true"===e.toLowerCase()),e}function O(e,t){y((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);let r=function(e){let t;switch(e.arrayFormat){case"index":return(e,r,s)=>{if(t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),!t){s[e]=r;return}void 0===s[e]&&(s[e]={}),s[e][t[1]]=r};case"bracket":return(e,r,s)=>{if(t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),!t){s[e]=r;return}if(void 0===s[e]){s[e]=[r];return}s[e]=[].concat(s[e],r)};case"colon-list-separator":return(e,r,s)=>{if(t=/(:list)$/.exec(e),e=e.replace(/:list$/,""),!t){s[e]=r;return}if(void 0===s[e]){s[e]=[r];return}s[e]=[].concat(s[e],r)};case"comma":case"separator":return(t,r,s)=>{let i="string"==typeof r&&r.includes(e.arrayFormatSeparator),n="string"==typeof r&&!i&&E(r,e).includes(e.arrayFormatSeparator);r=n?E(r,e):r;let a=i||n?r.split(e.arrayFormatSeparator).map(t=>E(t,e)):null===r?r:E(r,e);s[t]=a};case"bracket-separator":return(t,r,s)=>{let i=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),!i){s[t]=r?E(r,e):r;return}let n=null===r?[]:r.split(e.arrayFormatSeparator).map(t=>E(t,e));if(void 0===s[t]){s[t]=n;return}s[t]=[].concat(s[t],n)};default:return(e,t,r)=>{if(void 0===r[e]){r[e]=t;return}r[e]=[].concat(r[e],t)}}}(t),s=Object.create(null);if("string"!=typeof e||!(e=e.trim().replace(/^[?#&]/,"")))return s;for(let i of e.split("&")){if(""===i)continue;let[e,n]=p(t.decode?i.replace(/\+/g," "):i,"=");n=void 0===n?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?n:E(n,t),r(E(e,t),n,s)}for(let e of Object.keys(s)){let r=s[e];if("object"==typeof r&&null!==r)for(let e of Object.keys(r))r[e]=T(r[e],t);else s[e]=T(r,t)}return!1===t.sort?s:(!0===t.sort?Object.keys(s).sort():Object.keys(s).sort(t.sort)).reduce((e,t)=>{let r=s[t];return r&&"object"==typeof r&&!Array.isArray(r)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort((e,t)=>Number(e)-Number(t)).map(e=>t[e]):t}(r):e[t]=r,e},Object.create(null))}s=I,i=O,a=(e,t)=>{if(!e)return"";y((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);let r=r=>t.skipNull&&g(e[r])||t.skipEmptyString&&""===e[r],s=function(e){switch(e.arrayFormat){case"index":return t=>(r,s)=>{let i=r.length;return void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?r:null===s?[...r,[v(t,e),"[",i,"]"].join("")]:[...r,[v(t,e),"[",v(i,e),"]=",v(s,e)].join("")]};case"bracket":return t=>(r,s)=>void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?r:null===s?[...r,[v(t,e),"[]"].join("")]:[...r,[v(t,e),"[]=",v(s,e)].join("")];case"colon-list-separator":return t=>(r,s)=>void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?r:null===s?[...r,[v(t,e),":list="].join("")]:[...r,[v(t,e),":list=",v(s,e)].join("")];case"comma":case"separator":case"bracket-separator":{let t="bracket-separator"===e.arrayFormat?"[]=":"=";return r=>(s,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?s:(i=null===i?"":i,0===s.length)?[[v(r,e),t,v(i,e)].join("")]:[[s,v(i,e)].join(e.arrayFormatSeparator)]}default:return t=>(r,s)=>void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?r:null===s?[...r,v(t,e)]:[...r,[v(t,e),"=",v(s,e)].join("")]}}(t),i={};for(let t of Object.keys(e))r(t)||(i[t]=e[t]);let n=Object.keys(i);return!1!==t.sort&&n.sort(t.sort),n.map(r=>{let i=e[r];return void 0===i?"":null===i?v(r,t):Array.isArray(i)?0===i.length&&"bracket-separator"===t.arrayFormat?v(r,t)+"[]":i.reduce(s(r),[]).join("&"):v(r,t)+"="+v(i,t)}).filter(e=>e.length>0).join("&")},o=(e,t)=>{t=Object.assign({decode:!0},t);let[r,s]=p(e,"#");return Object.assign({url:r.split("?")[0]||"",query:O(I(e),t)},t&&t.parseFragmentIdentifier&&s?{fragmentIdentifier:E(s,t)}:{})},l=(e,t)=>{t=Object.assign({encode:!0,strict:!0,[m]:!0},t);let r=b(e.url).split("?")[0]||"",n=s(e.url),o=i(n,{sort:!1}),l=Object.assign(o,e.query),c=a(l,t);c&&(c=`?${c}`);let u=function(e){let t="",r=e.indexOf("#");return -1!==r&&(t=e.slice(r)),t}(e.url);return e.fragmentIdentifier&&(u=`#${t[m]?v(e.fragmentIdentifier,t):e.fragmentIdentifier}`),`${r}${c}${u}`},c=(e,t,r)=>{r=Object.assign({parseFragmentIdentifier:!0,[m]:!1},r);let{url:s,query:i,fragmentIdentifier:n}=o(e,r);return l({url:s,query:f(i,t),fragmentIdentifier:n},r)},u=(e,t,r)=>{let s=Array.isArray(t)?e=>!t.includes(e):(e,r)=>!t(e,r);return c(e,s,r)}}),a("hrLBB",function(t,r){e(t.exports,"selectHost",()=>c);let s="/gateway/api/gasv3/api/v1",i=e=>e&&e===n("hRleJ").envOverrides.FEDRAMP_MODERATE_SANDBOX?"as.atlassian-fex.com/api/v1":"as.staging.atl-paas-us-gov-mod.net/api/v1",a=e=>e&&e===n("hRleJ").envOverrides.FEDRAMP_MODERATE_SANDBOX?"api-private.atlassian-fex.com/gasv3/api/v1":"api.stg.atlassian-us-gov-mod.com/gasv3/api/v1",o=({useStargate:e,env:t,useLegacyUrl:r,envOverride:o})=>{if(t===n("hRleJ").envType.LOCAL||t===n("hRleJ").envType.DEV)throw Error("No LOCAL or DEV environments for FedRAMP.");if(t===n("hRleJ").envType.PROD&&o)throw Error("Cannot override to FedRAMP Sandbox for Prod.");return e?r?t===n("hRleJ").envType.PROD?"api.atlassian-us-gov-mod.com/gasv3/api/v1":a(o):window.location.host+s:t===n("hRleJ").envType.PROD?"as.atlassian-us-gov-mod.com/api/v1":i(o)},l=({useStargate:e,env:t,useLegacyUrl:r})=>e?r?t===n("hRleJ").envType.PROD?"api-private.atlassian.com/gasv3/api/v1":"api-private.stg.atlassian.com/gasv3/api/v1":window.location.host+s:t===n("hRleJ").envType.PROD?"as.atlassian.com/api/v1":"as.staging.atl-paas.net/api/v1";function c({useStargate:e,env:t,useLegacyUrl:r,perimeter:s,envOverride:i}){return s===n("hRleJ").perimeterType.FEDRAMP_MODERATE?o({useStargate:e,env:t,useLegacyUrl:r,envOverride:i}):l({useStargate:e,env:t,useLegacyUrl:r})}}),a("1t0DP",function(t,r){e(t.exports,"default",()=>c);var s=n("5zQU9");let i="session.id",a="session.expiry",o=/^\d+$/,l=()=>{};class c{constructor(e={}){(0,s.default)(this,"_generateNewSessionId",()=>{let e=Date.now().toString();return this._safeLocalStorage.setItem(i,e),this._onNewSessionStarted&&this._onNewSessionStarted(),e}),(0,s.default)(this,"_updateSessionExpiry",()=>{let e=Date.now()+this._sessionExpiryTime;return this._safeLocalStorage.setItem(a,e.toString()),e}),(0,s.default)(this,"_debouncedUpdateSessionExpiry",e=>{let{_updateSessionExpiry:t}=this;if(e<Date.now()+this._sessionExpiryDebounceThresholdPercentage*this._sessionExpiryTime)return t();this._sessionExpiryDebounceTimer&&clearTimeout(this._sessionExpiryDebounceTimer),this._sessionExpiryDebounceTimer=setTimeout(()=>{t()},this._sessionExpiryDebounce)}),this._sessionExpiryTime=e.sessionExpiryTime||18e5,this._sessionExpiryDebounce=e.sessionExpiryDebounce||5e3,this._sessionExpiryDebounceThresholdPercentage=e.sessionExpiryDebounceThresholdPercentage||.9,this._onNewSessionStarted=e.onNewSessionStarted?e.onNewSessionStarted:l,this._safeLocalStorage=new(n("empVP")).default}getCurrentSessionId(){let e=this._safeLocalStorage.getItem(i),t=parseInt(this._safeLocalStorage.getItem(a)||"0",10)||0;return(this._debouncedUpdateSessionExpiry(t),!e||t<=Date.now()||Number.isNaN(t)||!o.test(e))?this._generateNewSessionId():e}}}),a("cxp5h",function(t,r){e(t.exports,"default",()=>s);class s extends n("asdds").default{constructor(e){let t;try{t=window.sessionStorage||n("6PZgF").default}catch(e){t=n("6PZgF").default}super(t,e)}}}),a("kzV7m",function(r,s){e(r.exports,"default",()=>l);var i=n("5zQU9"),a=n("dFBS3");let o="tab.id";class l{constructor(){(0,i.default)(this,"_generateNewTabId",()=>{let e=t(a)();return this._safeSessionStorage.setItem(o,e),e}),this._safeSessionStorage=new(n("cxp5h")).default}getCurrentTabId(){let e=this._safeSessionStorage.getItem(o);return e||(e=this._generateNewTabId()),e}}}),a("6L92I",function(r,s){e(r.exports,"default",()=>p);var i=n("5zQU9"),a=n("4ea7H"),o=n("dFBS3");function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){(0,i.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let u="taskSessions",d="taskSessionsInit",h="awc.";class p{constructor(){(0,i.default)(this,"_taskSessionsNotRecentlyInitialised",e=>null===this._safeSessionStorage.getItem(u)||null===this._safeSessionStorage.getItem(d)||parseInt(this._safeSessionStorage.getItem(d)||"0",10)<e-3e3),(0,i.default)(this,"_removeTaskSessionPrefix",(e,t)=>t.split(h)[1]),(0,i.default)(this,"_isTaskSessionQueryParam",(e,t)=>t.startsWith(h)),(0,i.default)(this,"getAllTaskSessions",()=>{try{return JSON.parse(this._safeSessionStorage.getItem(u)||"")}catch(e){return{}}}),(0,i.default)(this,"_writeToSessionStorage",e=>{try{this._safeSessionStorage.setItem(u,JSON.stringify(e))}catch(e){}}),(0,i.default)(this,"_appendTaskSessions",e=>{let t=this.getAllTaskSessions(),r=null===t?e:Object.assign(t,e);this._writeToSessionStorage(r)}),(0,i.default)(this,"_safelyRemoveKey",(e,t)=>null===e?{}:(delete e[t],e)),(0,i.default)(this,"createTaskSession",e=>{let r=t(o)(),s={};return s[e]=r,this._appendTaskSessions(s),r}),(0,i.default)(this,"createTaskSessionWithProvidedId",(e,t)=>{if("string"!=typeof t)throw TypeError("invalid taskSessionId, must be string");let r={};r[e]=t,this._appendTaskSessions(r)}),(0,i.default)(this,"completeTaskSession",e=>{let t=this.getAllTaskSessions(),r=this._safelyRemoveKey(t,e);this._writeToSessionStorage(r)}),(0,i.default)(this,"formatTaskSessionQueryString",({uri:e,includedTaskSessions:t})=>{let{url:r,query:s}=(0,a.parseUrl)(e),i=this.getAllTaskSessions(),o=t?(0,n("eaJEm").pick)(i,t):(0,n("eaJEm").omit)(i,Object.values(n("hRleJ").originTracingType));if(0===Object.keys(o).length)return e;let l=c(c({},(0,n("eaJEm").mapKeys)(o,(e,t)=>h+t)),s);return`${r}?${(0,a.stringify)(l)}`}),(0,i.default)(this,"stripQueryParameters",()=>{let e=(0,n("eaJEm").mapKeys)((0,n("8TuVU").default)(this._isTaskSessionQueryParam),this._removeTaskSessionPrefix);this._appendTaskSessions(e)});let e=Date.now();this._safeSessionStorage=new(n("cxp5h")).default;try{this._taskSessionsNotRecentlyInitialised(e)&&(this._writeToSessionStorage({}),this._safeSessionStorage.setItem(d,e.toString()))}catch(e){}}}}),a("8Pilt",function(r,s){e(r.exports,"default",()=>u);var i=n("5zQU9"),a=n("M2DFp");let o=(0,n("eSBJq").AllAnalyticsCookies).AWC_ANALYTICS_DEBUG.getKey(),l="synthetic",c=()=>{try{return JSON.parse(t(a).get(o)||"false")}catch(e){t(a).remove(o)}return!1};var u=class{constructor(){(0,i.default)(this,"_bind",()=>{"undefined"==typeof window||window.testAnalytics||(window.testAnalytics={eventCache:[],events:()=>window.testAnalytics.eventCache,clear:()=>{window.testAnalytics.eventCache=[];try{localStorage.removeItem("awc.ui.viewed.last.sent"),localStorage.removeItem("awc-staging.ui.viewed.last.sent"),localStorage.removeItem("awc-dev.ui.viewed.last.sent"),localStorage.removeItem("awc-local.ui.viewed.last.sent")}catch(e){}}})}),(0,i.default)(this,"_cache",e=>{"undefined"!=typeof window&&(window.testAnalytics.eventCache.length>=100&&(window.testAnalytics.eventCache=window.testAnalytics.eventCache.slice(1,window.testAnalytics.eventCache.length)),window.testAnalytics.eventCache.push(e))}),(0,i.default)(this,"_shouldCacheEvent",()=>this._isDebugCookieEnabled),(0,i.default)(this,"saveEvent",e=>{e&&this._shouldCacheEvent()&&(window.testAnalytics||this._bind(),e.tags instanceof Array?e.tags.push(l):e.tags=[l],this._cache(e))}),this._isDebugCookieEnabled=c(),this._isDebugCookieEnabled&&this._bind()}}}),a("fBPLq",function(t,r){e(t.exports,"default",()=>c);var s=n("bwPfh"),i=n("5zQU9");let a=["embeddedProduct"];function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){(0,i.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}class c{constructor(e,t,r,o={}){if((0,i.default)(this,"start",()=>{this._startInterval(),this._bindEventListeners()}),(0,i.default)(this,"stop",()=>{this._stopInterval(),this._unbindEventListeners()}),(0,i.default)(this,"resetTimers",()=>{this._intervalId&&(this.stop(),this.start())}),(0,i.default)(this,"_bindEventListeners",()=>{"undefined"!=typeof window&&(window.addEventListener("focus",this._focusListener),window.addEventListener("blur",this._blurListener))}),(0,i.default)(this,"_unbindEventListeners",()=>{"undefined"!=typeof window&&(window.removeEventListener("focus",this._focusListener),window.removeEventListener("blur",this._blurListener))}),(0,i.default)(this,"_startInterval",()=>{clearInterval(this._intervalId),this._intervalId=setInterval(this._handleInterval,this._delay)}),(0,i.default)(this,"_stopInterval",()=>{this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null)}),(0,i.default)(this,"_getProductKey",(e,t)=>{let r=e;return t&&(r+=`-${t}`),r}),(0,i.default)(this,"_getLastSentTimestamp",(e,t,r)=>{let s=(((this._parseLocalStorageData()||{})[r]||{})[t]||{})[e]||null;return s}),(0,i.default)(this,"_parseLocalStorageData",()=>{let e=this._safeLocalStorage.getItem(this._storageKey);try{return JSON.parse(e||"")}catch(e){return this._safeLocalStorage.removeItem(this._storageKey),null}}),(0,i.default)(this,"_setLastSentTimestamp",(e,t,r)=>{let s=this._parseLocalStorageData()||{},i=s[r]||{},n=i[t]||{};n[e]=Date.now(),i[t]=n,s[r]=i,this._safeLocalStorage.setItem(this._storageKey,JSON.stringify(s))}),(0,i.default)(this,"_shouldSendEvent",(e,t,r,s)=>{if(!document.hasFocus()||t!==n("hRleJ").tenantType.NONE&&!r||!s)return!1;let i=Date.now()-this._getLastSentTimestamp(e,r,s);return i>this._throttle}),(0,i.default)(this,"_handleInterval",()=>{let e=this._getContext(),{embeddedProduct:t}=e,r=(0,s.default)(e,a);this._sendEvent(this._product,r),t&&this._sendEvent(t,r,!0)}),(0,i.default)(this,"_sendEvent",(e,t,r=!1)=>{let{subproduct:s,tenantIdType:i,tenantId:n,userId:a,lastScreenEvent:o,attributes:l}=t,c=this._getProductKey(e,s);if(this._shouldSendEvent(c,i,n,a)){this._setLastSentTimestamp(c,n,a);let t=this._createEvent(e,s,r,o,l);this._onEvent(t)}}),(0,i.default)(this,"_createEvent",(e,t,r,s,i)=>{let n={product:e,source:"ui",action:"viewed",actionSubject:"ui",attributes:i};return r&&(n.subproduct=null,n.version=null,n.attributes=l(l({},n.attributes),{},{embeddedInEnv:this._productInfo.env,embeddedInProduct:this._productInfo.product,embeddedInSubproduct:t,embeddedInVersion:this._productInfo.version,embeddedInOrigin:this._productInfo.origin,embeddedInPlatform:this._productInfo.platform})),s&&(n.attributes=l(l({},n.attributes),{},{lastScreenEvent:{name:s.name,attributes:s.attributes}})),n}),!e)throw Error("Missing productInfo");if(!e.product)throw Error("Missing productInfo.product");if(!t)throw Error("Missing getContext callback");if("function"!=typeof t)throw Error("Invalid getContext, must be function");if(!r)throw Error("Missing onEvent callback");if("function"!=typeof r)throw Error("Invalid onEvent, must be function");this._productInfo=e,this._product=e.product,this._getContext=t,this._onEvent=r,this._delay=o.delay||2e3,this._throttle=o.throttle||36e5,this._storageKey=o.storageKey||"ui.viewed.last.sent",this._safeLocalStorage=new(n("empVP")).default({envPrefix:this._productInfo.env}),this._focusListener=()=>{this._startInterval()},this._blurListener=()=>{this._stopInterval()}}}}),a("1ZcVH",function(t,r){e(t.exports,"default",()=>s);function s(e,t){return e&&"function"==typeof e?()=>{e(t)}:null}}),a("l4WDe",function(t,r){e(t.exports,"XIDPromise",()=>s);let s=(e,t)=>{if(e&&t&&"function"==typeof t)return Promise.race([t().catch(()=>()=>(0,n("590Mu").createUnknownXid)()),new Promise(e=>{setTimeout(()=>e(()=>(0,n("590Mu").createTimeoutXid)()),n("590Mu").XID_TIMEOUT)})])}}),a("590Mu",function(t,r){e(t.exports,"XID_TIMEOUT",()=>s),e(t.exports,"createTimeoutXid",()=>i),e(t.exports,"createUnknownXid",()=>a);let s=5e3,i=()=>[{type:n("akomA").XIDItemType.XC,state:"TIMEOUT"},{type:n("akomA").XIDItemType.UID,state:"TIMEOUT"}],a=()=>[{type:n("akomA").XIDItemType.XC,state:"UNKNOWN"},{type:n("akomA").XIDItemType.UID,state:"UNKNOWN"}]}),a("akomA",function(t,r){var s,i;e(t.exports,"XIDItemType",()=>n);let n=((s={}).XC="xc",s.UID="uid",s);(i={}).NEW="NEW",i.CHANGED="CHANGED",i.EXISTING="EXISTING",i.TIMEOUT="TIMEOUT",i.ERROR="ERROR",i.UNAVAILABLE="UNAVAILABLE",i.MALFORMED="MALFORMED",i.UNKNOWN="UNKNOWN"}),a("30Bax",function(t,r){e(t.exports,"canCompress",()=>s),e(t.exports,"buildCompressionFunction",()=>a);let s=e=>"feature"===e.actionSubject&&"exposed"===e.action&&"operational"===e.eventType&&e.attributes&&e.tags&&e.tags.includes("measurement")&&!e.tags.includes("hasCustomAttributes"),i=(e,t=50)=>{if(!e||e.length<=0)return[];if(t<=0)throw Error("Batch size must be greater than 0");let r=e.map(e=>{let{flagKey:t,value:r,reason:s,ruleId:i,errorKind:n}=e.attributes;return{key:t,value:r,...s&&{reason:s},...i&&{ruleId:i},...n&&{errorKind:n}}});return n(r,t)},n=(e,t)=>{let r=[];for(let s=0;s<e.length;s+=t){let i=e.slice(s,s+t);r.push({actionSubject:"features",action:"exposed",eventType:"operational",attributes:{evaluations:i},tags:["measurement"],source:"@atlassian/exposure-events-compressor"})}return r},a=e=>t=>i(t,e)}),a("6TYON",function(r,s){e(r.exports,"default",()=>l);var i=n("kU09D"),a=n("eUqFw");let o=(0,n("2jDha").default)()(n("50oJA").EngagementProvider);var l=(0,n("5Urw3").default)(e=>t(a).createElement(o,(0,i.default)({},e,{store:(0,n("56rs2").default)(e.config)})))}),a("2jDha",function(r,s){e(r.exports,"default",()=>a);var i=n("eUqFw"),a=(e={})=>r=>{let s=(0,i.forwardRef)((s,a)=>{let{patchedEventProps:o}=(0,n("3N2S0").usePatchedProps)(e,s),{createAnalyticsEvent:l}=(0,n("bFzGY").useAnalyticsEvents)();return t(i).createElement(r,{...s,...o,createAnalyticsEvent:l,ref:a})});return s.displayName=`WithAnalyticsEvents(${r.displayName||r.name})`,s}}),a("3N2S0",function(t,r){e(t.exports,"usePatchedProps",()=>i);var s=n("eUqFw");function i(e={},t){let{createAnalyticsEvent:r}=(0,n("bFzGY").useAnalyticsEvents)(),i=(0,s.useRef)({}),a=(0,s.useMemo)(()=>{let s=i.current;return Object.keys(s).filter(t=>!(t in e)).forEach(e=>delete s[e]),Object.keys(e).reduce((i,n)=>{let a=e[n];if(!["object","function"].includes(typeof a))return i;let o=t[n];if(n in s&&s[n].eventCreator===a&&s[n].propValue===o)return{...i,[n]:s[n].wrappedCallback};let l=(...e)=>{let s="function"==typeof a?a(r,t):r(a);o&&"function"==typeof o&&o(...e,s)};return s[n]={eventCreator:a,wrappedCallback:l,propValue:o},{...i,[n]:l}},{})},[e,t,r,i]);return{patchedEventProps:a}}}),a("5Urw3",function(r,s){e(r.exports,"default",()=>a);var i=n("eUqFw");function a(e){let r=t(i).createContext(!1);return function(s){return t(i).createElement(r.Consumer,null,n=>n?s.children:t(i).createElement(r.Provider,{value:!0},t(i).createElement(e,s)))}}}),a("56rs2",function(r,s){e(r.exports,"store",()=>c),e(r.exports,"default",()=>u);var i=n("hTLlD"),a=n("huRi7");let o={messageMapping:new Map,current:null,initialized:!1,initializing:!1,config:{cloudId:"",aaid:"",locale:"",product:"",stargateUrl:"",orgId:"",workspaceId:""}},l=(0,n("9bUAF").createCancellationToken)(),c=(0,a.createStore)((e=o,r)=>{switch(r.type){case n("jtW6P").SET_MESSAGE_MAPPING:return{...e,initialized:!0,initializing:!1,messageMapping:r.messageMapping};case n("jtW6P").SET_INITIALIZING:return{...e,config:r.config,initializing:!0};case n("jtW6P").SET_CURRENT:{let{eventMapping:s}=r,{message:n,component:a}=s,o=function(e,r){let s=new Map;return e.forEach((e,n)=>{t(i)(e.component,r)||s.set(n,e)}),s}(e.messageMapping,a);return{...e,current:{messageId:n.messageId,variationId:n.variationId,...a},messageMapping:o}}case n("jtW6P").CLEAR_CURRENT:return{...e,current:null};case n("jtW6P").RESET_STORE:return o;default:return e}});var u=e=>{let t=c.getState();if(t.initializing||t.initialized){if(t.config.cloudId===e.cloudId)return c;l.isCancelled=!0,l=(0,n("9bUAF").createCancellationToken)(),c.dispatch((0,n("jtW6P").resetStore)())}let r={...e};return r.locale=r.locale.replace("_","-"),c.dispatch((0,n("jtW6P").initialize)(r)),(0,n("3DGOA").isMessagingEnabled)()&&(0,n("8zQg9").processMessages)(c,r,l),c}}),a("9bUAF",function(t,r){e(t.exports,"createCancellationToken",()=>s);function s(e=!1){return{isCancelled:e}}}),a("3DGOA",function(t,r){e(t.exports,"isMessagingEnabled",()=>s);function s(){return!(0,n("4K830").isFedRamp)()}}),a("jtW6P",function(t,r){e(t.exports,"SET_MESSAGE_MAPPING",()=>s),e(t.exports,"SET_INITIALIZING",()=>i),e(t.exports,"RESET_STORE",()=>n),e(t.exports,"CLEAR_CURRENT",()=>a),e(t.exports,"SET_CURRENT",()=>o),e(t.exports,"resetStore",()=>l),e(t.exports,"initialize",()=>c),e(t.exports,"setMessageMapping",()=>u),e(t.exports,"setCurrent",()=>d),e(t.exports,"clearCurrent",()=>h);let s="SET_MESSAGE_MAPPING",i="SET_INITIALIZING",n="RESET_STORE",a="CLEAR_CURRENT",o="SET_CURRENT",l=()=>({type:n}),c=e=>({type:i,config:e}),u=e=>({type:s,messageMapping:e});function d(e){return{type:o,eventMapping:e}}function h(){return{type:a}}}),a("8zQg9",function(t,r){e(t.exports,"processMessages",()=>i);let s=e=>{let t=new Map;return e.forEach(e=>{let r=e.components;r.forEach((s,i)=>{s.triggers.forEach(n=>{t.set(n,{message:e,component:{componentId:i,isLast:i===r.length-1,...s}})})})}),t};async function i(e,t,r){let a,o;if(r.isCancelled)return;let l=(0,n("56rs2").store).getState(),{cloudId:c,stargateUrl:u,product:d,locale:h}=t;try{let e=await (0,n("eMQs7").getMessages)(c,u,d,h);if(r.isCancelled)return;a=e.messages,o=e.interval}catch(e){return}if(null===l.current){let t=s(a);e.dispatch((0,n("jtW6P").setMessageMapping)(t))}0!==o&&setTimeout(()=>{i(e,t,r)},1e3*o)}}),a("eMQs7",function(r,s){e(r.exports,"getMessages",()=>o),e(r.exports,"startMessage",()=>f),e(r.exports,"stopMessage",()=>g),e(r.exports,"sendUserResponse",()=>I),e(r.exports,"markAsSeenAndFatigued",()=>O);var i=n("asbhz");let a=t(i).parse("/engage-targeting/api/v2/user/{cloudId}/in-product-messages{?product,schema,locale}");async function o(e,t,r,s){return(0,n("fPMXA").stargateFetchRetryOn5xx)(`${t}${a.expand({cloudId:e,product:r,schema:"2",locale:s})}`).then(n("fPMXA").errorIfNotOk).then(e=>e.json().then(t=>({messages:t,interval:Number.parseFloat(e.headers.get("POLL-INTERVAL")||"0")})))}function l(e){return e.status===h}let c=t(i).parse("/engage-targeting/api/v2/user/messages/{messageId}/start"),u=t(i).parse("/engage-targeting/api/v2/user/messages/{messageId}/start/{variationId}"),d=t(i).parse("/engage-targeting/api/v2/user/messages/{messageId}/stop"),p=new(n("dA61v")).EngagekitChoreographerPlugin;async function f(e,t){return null!=t&&t.enableChoreographer?m(e):v(e)}async function g(e,t){return null!=t&&t.enableChoreographer?y(e):E(e)}async function m(e){return p.startMessageWithPlugin(e.messageId,()=>v(e))}async function y(e){return p.stopMessageWithPlugin(e.messageId,()=>E(e))}async function v(e){let t={cloudId:e.cloudId,orgId:e.orgId,workspaceId:e.workspaceId};return(0,n("fPMXA").stargateFetchRetryOn5xx)(e.variationId?`${e.stargateUrl}${u.expand({messageId:e.messageId,variationId:e.variationId})}`:`${e.stargateUrl}${c.expand({messageId:e.messageId})}`,{method:"post",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then(n("fPMXA").pullResponseTextIfNotOk).then(l)}async function E(e){let t={cloudId:e.cloudId,orgId:e.orgId,workspaceId:e.workspaceId};return(0,n("fPMXA").stargateFetchRetryOn5xx)(`${e.stargateUrl}${d.expand({messageId:e.messageId})}`,{method:"post",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then(n("fPMXA").pullResponseTextIfNotOk).then(l)}let b=t(i).parse("/engage-targeting/api/v2/user/{cloudId}/messages/{messageId}/response");async function I(e,t,r,s){return(0,n("fPMXA").stargateFetchRetryOn5xx)(`${t}${b.expand({cloudId:e,messageId:r})}`,{method:"post",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}}).then(n("fPMXA").pullResponseTextIfNotOk).then(()=>Promise.resolve())}let T=t(i).parse("/engage-targeting/api/v2/user/messages/{messageId}/seen");async function O(e){let t={cloudId:e.cloudId,orgId:e.orgId,workspaceId:e.workspaceId};return(0,n("fPMXA").stargateFetchRetryOn5xx)(`${e.stargateUrl}${T.expand({messageId:e.messageId})}`,{method:"post",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then(n("fPMXA").pullResponseTextIfNotOk).then(()=>Promise.resolve())}}),a("dA61v",function(t,r){e(t.exports,"EngagekitChoreographerPlugin",()=>s);class s extends n("5QR6u").ChoreographerPlugin{constructor(){super("Engagekit")}startMessageWithPlugin(e,t){return(0,n("fKE23").__awaiter)(this,void 0,void 0,function*(){this.onStart(e,t);let r=yield this.startMessage(e);return r===n("32Ies").MessageDeliveryStatus.STARTED})}stopMessageWithPlugin(e,t){return(0,n("fKE23").__awaiter)(this,void 0,void 0,function*(){this.onStop(e,t);let r=yield this.stopMessage(e);return r===n("32Ies").MessageDeliveryStatus.STOPPED})}}}),a("5QR6u",function(t,r){e(t.exports,"ChoreographerPlugin",()=>s);class s{constructor(e){this._isDisabled=!1,this._isDisplayingMessage=!1,this._productId=e,this._unregisterPlugin=this._registerPlugin()}destroy(){this._unregisterPlugin()}isDisplayingMessage(){return this._isDisplayingMessage}disable(){this._isDisabled=!0}enable(){this._isDisabled=!1}startMessage(e){return(0,n("fKE23").__awaiter)(this,void 0,void 0,function*(){if(this._isDisabled)return n("32Ies").MessageDeliveryStatus.BLOCKED;let t=yield(0,n("7pmud").Choreographer).getInstance().startMessage(this._productId,e,this);return t&&(this._isDisplayingMessage=!0),t})}stopMessage(e){return(0,n("fKE23").__awaiter)(this,void 0,void 0,function*(){let t=yield(0,n("7pmud").Choreographer).getInstance().stopMessage(this._productId,e);return t&&(this._isDisplayingMessage=!1),t})}on(e,t){return(0,n("7pmud").Choreographer).getInstance().on(this._productId,e,t)}onStart(e,t){return(0,n("7pmud").Choreographer).getInstance().onStart(this._productId,e,t)}onStop(e,t){return(0,n("7pmud").Choreographer).getInstance().onStop(this._productId,e,t)}off(e){return(0,n("7pmud").Choreographer).getInstance().off(this._productId,e)}_registerPlugin(){return this._unregisterPlugin=(0,n("7pmud").Choreographer).getInstance().registerPlugin(this._productId,this),this._unregisterPlugin}}}),a("7pmud",function(t,r){let s;e(t.exports,"Choreographer",()=>i);class i{static getInstance(){return s||(s=new this),s}constructor(){this._currentMessage=null,this._messages=new Map,this._plugins=new Map,this._messageTtl=null,this._isDisabled=!1}_setMessageTtl(e,t){this._currentMessage={productId:e,messageId:t},this._messageTtl=setTimeout(()=>{this._currentMessage&&this.stopMessage(e,t)},3e5)}_isCurrentMessage(e,t){var r,s;return(null===(r=this._currentMessage)||void 0===r?void 0:r.productId)===e&&(null===(s=this._currentMessage)||void 0===s?void 0:s.messageId)===t}_clearMessageTtlIfMatching(){this._messageTtl&&(this._currentMessage=null,clearTimeout(this._messageTtl))}_disablePlugins(e){this._isDisabled=!0,[...this._plugins.values()].forEach(t=>{t!==e&&t.disable()})}_enablePlugins(){[...this._plugins.values()].forEach(e=>e.enable()),this._isDisabled=!1}_unregisterPlugin(e){this._messages.delete(e),this._plugins.delete(e)}_isDisplayingMessage(){return!!this._currentMessage||[...this._plugins.values()].reduce((e,t)=>e||t.isDisplayingMessage(),!1)}_getMessages(e){var t;return null!==(t=this._messages.get(e))&&void 0!==t?t:new Map}startMessage(e,t,r){return(0,n("fKE23").__awaiter)(this,void 0,void 0,function*(){var s;if(this._isDisabled||this._isDisplayingMessage())return n("32Ies").MessageDeliveryStatus.BLOCKED;if(!this._hasMessageRecord(e,t))return n("32Ies").MessageDeliveryStatus.UNREGISTERED;let i=this._ensureMessageRecord(e,t);this._disablePlugins(r);let a=null===(s=yield i.start())||void 0===s||s;return a?(this._setMessageTtl(e,t),n("32Ies").MessageDeliveryStatus.STARTED):(this._enablePlugins(),n("32Ies").MessageDeliveryStatus.OPTED_OUT)})}stopMessage(e,t){return(0,n("fKE23").__awaiter)(this,void 0,void 0,function*(){var r;if(!this._hasMessageRecord(e,t))return n("32Ies").MessageDeliveryStatus.UNREGISTERED;let s=this._ensureMessageRecord(e,t),i=null===(r=yield s.stop())||void 0===r||r;return i?(this._isCurrentMessage(e,t)&&(this._clearMessageTtlIfMatching(),this._enablePlugins()),n("32Ies").MessageDeliveryStatus.STOPPED):n("32Ies").MessageDeliveryStatus.OPTED_OUT})}registerPlugin(e,t){if(this._plugins.has(e))throw Error(`Choreographer plugin already registered for ${e}!`);return this._plugins=this._plugins.set(e,t),this._isDisabled&&t.disable(),()=>{this._unregisterPlugin(e)}}_ensureMessageRecord(e,t){let r=this._messages.get(e);r||(r=new Map,this._messages.set(e,r));let s=r.get(t);return s||(s={[n("32Ies").MessageEventType.START]:()=>{},[n("32Ies").MessageEventType.STOP]:()=>{}},r.set(t,s)),s}_hasMessageRecord(e,t){var r,s;return!!(null===(s=null===(r=this._messages.get(e))||void 0===r?void 0:r.has)||void 0===s?void 0:s.call(r,t))}on(e,t,r){let s=Object.assign(Object.assign({},this._ensureMessageRecord(e,t)),r);this._messages.get(e).set(t,s)}onStart(e,t,r){this.on(e,t,{start:r})}onStop(e,t,r){this.on(e,t,{stop:r})}off(e,t){var r,s;null===(s=null===(r=this._messages.get(e))||void 0===r?void 0:r.delete)||void 0===s||s.call(r,t)}}}),a("32Ies",function(t,r){e(t.exports,"MessageEventType",()=>s),e(t.exports,"MessageDeliveryStatus",()=>i);let s={START:"start",STOP:"stop"},i={BLOCKED:"blocked",OPTED_OUT:"optedout",STARTED:"started",STOPPED:"stopped",UNREGISTERED:"unregistered"}});const h=204;a("fPMXA",function(t,r){async function s(e){if(!e.ok)throw Error(`${e.status}: ${await e.text()}`);return e}async function i(e){return e.ok||await e.text(),e}function a(e){let t=e.headers.get("X-Failure-Category"),r=!!t&&"throttled"===t.toLowerCase();return 503===e.status&&r}function o(e,t,r=a){var s;return s={...t,credentials:(0,n("ibNDJ").default).includes(location.host)?"include":"same-origin"},c(fetch(e,s),r,()=>(function e(t,r,s,i=0){return c(function(e,t,r){let s=t?6e4*t+Math.round(5e3*Math.random()):0;return new Promise((t,i)=>{setTimeout(()=>{fetch(e,r).then(t).catch(i)},s)})}(t,i,s),r,()=>e(t,r,s,Math.min(0===i?1:2*i,60)))})(e,r,s))}function l(e,t){return o(e,t,e=>e.status>=500&&e.status<=599)}function c(e,t,r){return e.then(e=>t(e)?r():Promise.resolve(e)).catch(r)}e(t.exports,"errorIfNotOk",()=>s),e(t.exports,"pullResponseTextIfNotOk",()=>i),e(t.exports,"stargateFetch",()=>o),e(t.exports,"stargateFetchRetryOn5xx",()=>l)}),a("ibNDJ",function(t,r){e(t.exports,"default",()=>s);var s=["bitbucket-pipelines.dev.public.atl-paas.net","bitbucket-pipelines.staging.public.atl-paas.net","bitbucket-pipelines.prod.public.atl-paas.net"]}),a("50oJA",function(r,s){e(r.exports,"EngagementProvider",()=>p);var i=n("5zQU9"),a=n("eUqFw"),o=n("046kq"),l=n("6l6Xk"),c=n("1Zvbf");function u(e,t){let r=new(n("64G28")).default({payload:{action:"exposed",actionSubject:"feature",actionSubjectId:e.flagKey,source:"engagement-platform",attributes:e}});Promise.resolve(t).then(e=>{e.sendTrackEvent(r.payload)})}function d(e,t,r){return{reason:"RULE_MATCH",ruleId:"engagement.inproduct",flagKey:`engagement.inproduct.${e}`,value:t,...r}}async function h(e,t,r,s,i){let{locale:a}=t,{message:o,component:l}=e;if(o.holdout){await (0,n("eMQs7").startMessage)({cloudId:t.cloudId,stargateUrl:t.stargateUrl,messageId:o.messageId,variationId:o.variationId,orgId:t.orgId,workspaceId:t.workspaceId},i),await (0,n("eMQs7").stopMessage)({cloudId:t.cloudId,stargateUrl:t.stargateUrl,messageId:o.messageId,orgId:t.orgId,workspaceId:t.workspaceId},i),u(d(o.messageId,"holdout",{locale:a}),s);return}if(0===l.componentId){let l=await (0,n("eMQs7").startMessage)({cloudId:t.cloudId,stargateUrl:t.stargateUrl,messageId:o.messageId,variationId:o.variationId,orgId:t.orgId,workspaceId:t.workspaceId},i);l&&(u(d(o.messageId,o.variationId,{locale:a}),s),r.dispatch((0,n("jtW6P").setCurrent)(e)))}else u(d(o.messageId,o.variationId,{locale:a}),s),r.dispatch((0,n("jtW6P").setCurrent)(e))}class p extends a.Component{constructor(e){super(e),(0,i.default)(this,"onStoreChange",e=>{let{createAnalyticsEvent:t}=this.props,r=this.getConfig(),{locale:s}=r;if(e.initialized){if(!p.hasInitializedAtLeastOneEngagementProvider){this.sendOperationalEventWithClient({action:"loaded",actionSubject:"messages",actionSubjectId:void 0,source:"engagekit",attributes:{locale:s}});let e=(0,n("9LRfM").getBrowserInfo)();this.onEvent(t({event:"engagement.inproduct.loaded",properties:{browser:e.name,browserVersion:e.version}})),p.hasInitializedAtLeastOneEngagementProvider=!0}this.analyticsEventQueue.flush(this.onEvent),this.unsubscribeFromStore&&this.unsubscribeFromStore()}}),(0,i.default)(this,"onEvent",e=>{let r=this.getState();if(!r.initialized){let t=this.analyticsEventQueue.enqueue(e);t||this.fireQueueOverflowEvent();return}let{eventTarget:s,store:i,analyticsClientInstance:a}=this.props,l=this.getConfig(),{current:c,messageMapping:u}=r,d=function(e){let t={...e.payload,context:{}};return Object.assign(t.context,...e.context),t}(e);if(s.dispatchEvent((0,n("aY2VY").default)({eventName:"ep.analyticEvent",canBubble:!1,cancellable:!1,detail:d})),!(0,n("3DGOA").isMessagingEnabled)()||c)return;let p=Array.from(u.keys()).find(e=>t(o)(d,e));p&&h(u.get(p),l,i,a,this.props.coordinationOptions)}),(0,i.default)(this,"onEngagementEvent",e=>{let{action:t,clickType:r,ekMessageId:s,ekVariationId:i,ekComponentId:n,ekComponentType:a,ekIsLast:o}=e.payload,l=this.getConfig(),{locale:c}=l,u={messageId:s,variationId:i,componentIndex:n,locale:c};"click"===t?(this.handleClickEvent(s,i,n),u.buttonType=r,this.sendUIEventWithClient({action:"clicked",actionSubject:"button",actionSubjectId:`${r}Button`,source:`engagement_${a}`,attributes:u})):("shown"===t&&(u.componentType=a,this.sendScreenEventWithClient({name:`engagement_${a}`,attributes:u})),"hidden"===t&&(u.isLast=o,this.sendUIEventWithClient({action:"hid",actionSubject:"component",actionSubjectId:void 0,source:`engagement_${a}`,attributes:u}))),this.onEvent(e)}),(0,i.default)(this,"subscribeEngagementState",e=>{let{store:t}=this.props;return e(t.getState()),t.subscribe(()=>{e(t.getState())})});let{analyticsClientInstance:r}=this.props;this.sendUIEventWithClient=(0,n("hHcrN").sendUIEvent).bind(null,r),this.sendScreenEventWithClient=(0,n("hHcrN").sendScreenEvent).bind(null,r),this.sendOperationalEventWithClient=(0,n("hHcrN").sendOperationalEvent).bind(null,r),this.analyticsEventQueue=new(n("chBKx")).default(100),this.unsubscribeFromStore=this.subscribeEngagementState(this.onStoreChange),this.fireQueueOverflowEvent=t(l)(()=>{})}getConfig(){let{config:e}=this.getState();return e}getChildContext(){return{subscribeEngagementState:this.subscribeEngagementState}}getState(){return this.props.store.getState()}getActiveMessage(){return this.getState().current}completeMessage(e){let t=this.getConfig();(0,n("eMQs7").stopMessage)({cloudId:t.cloudId,stargateUrl:t.stargateUrl,messageId:e,orgId:t.orgId,workspaceId:t.workspaceId},this.props.coordinationOptions)}handleClickEvent(e,t,r){let s=this.getActiveMessage();s&&s.messageId===e&&s.variationId===t&&s.componentId===r&&(s.isLast&&this.completeMessage(e),this.props.store.dispatch((0,n("jtW6P").clearCurrent)()))}componentWillUnmount(){this.unsubscribeFromStore&&this.unsubscribeFromStore()}render(){return t(a).createElement(n("jYVKV").default,{channel:"*",onEvent:this.onEvent},t(a).createElement(n("jYVKV").default,{channel:"engagement",onEvent:this.onEngagementEvent},this.props.children))}}(0,i.default)(p,"childContextTypes",{subscribeEngagementState:t(n("1Qivz")).func}),(0,i.default)(p,"defaultProps",{eventTarget:t(c)}),(0,i.default)(p,"hasInitializedAtLeastOneEngagementProvider",!1)}),a("hHcrN",function(t,r){function s(e,t){Promise.resolve(e).then(e=>{e.sendScreenEvent(t)})}function i(e,t){Promise.resolve(e).then(e=>{e.sendUIEvent(t)})}function n(e,t){Promise.resolve(e).then(e=>{e.sendOperationalEvent(t)})}e(t.exports,"sendScreenEvent",()=>s),e(t.exports,"sendUIEvent",()=>i),e(t.exports,"sendOperationalEvent",()=>n)}),a("9LRfM",function(t,r){e(t.exports,"getBrowserInfo",()=>n);let s=[{name:"IE",pattern:/Trident\/.*; rv:([^;)]+)/},{name:"Chrome",pattern:/Chrome\/([^ )]+)/},{name:"Firefox",pattern:/Firefox\/([^ )]+)/}],i={name:"unknown",version:"unknown"};function n(e){if(!window.navigator)return i;for(let t of(e||(e=window.navigator.userAgent),s)){let r=e.match(t.pattern);if(r)return{name:t.name,version:r[1]}}return i}}),a("aY2VY",function(t,r){e(t.exports,"default",()=>s);var s=({eventName:e,canBubble:t,cancellable:r,detail:s})=>{let i=document.createEvent("CustomEvent");return i.initCustomEvent(e,t,r,s),i}}),a("chBKx",function(t,r){e(t.exports,"default",()=>s);class s{constructor(e){this.queue=[],this.maxSize=e}enqueue(e){return this.queue.length!==this.maxSize&&(this.queue.push(e),!0)}flush(e){this.queue.forEach(e),this.queue=[]}getSize(){return this.queue.length}}}),a("591ND",function(t,r){e(t.exports,"usePlatformLeafSyntheticEventHandler",()=>i);var s=n("eUqFw");function i({fn:e,action:t,componentName:r,packageName:i,packageVersion:a,analyticsData:o}){let{createAnalyticsEvent:l}=(0,n("bFzGY").useAnalyticsEvents)(),c=(0,n("gNgZO").useTrackedRef)(o),u=(0,n("gNgZO").useTrackedRef)(e),d=(0,s.useCallback)(()=>{let e=l({action:t,actionSubject:r,attributes:{componentName:r,packageName:i,packageVersion:a}}),s={componentName:r,packageName:i,packageVersion:a,...c.current};e.context.push(s);let n=e.clone();n&&n.fire("atlaskit"),u.current(e)},[t,r,i,a,l,c,u]);return d}}),a("1ngde",function(r,s){e(r.exports,"default",()=>a);var i=n("eUqFw"),a=e=>r=>{let s=(0,i.forwardRef)(({analyticsContext:s,...a},o)=>{let l=(0,i.useMemo)(()=>({...e,...s}),[s]);return t(i).createElement(n("aw5Sy").default,{data:l},t(i).createElement(r,{...a,ref:o}))});return s.displayName=`WithAnalyticsContext(${r.displayName||r.name})`,s}}),a("9BA6k",function(t,r){e(t.exports,"default",()=>c);var s=n("5zQU9"),i=n("cJt2B");function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach(function(t){(0,s.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let l={initialPollInterval:5e3,idleTimeout:3e4,multiplierCallback:e=>e+e};class c{constructor(e,t,r,a){if((0,s.default)(this,"start",()=>{this.browserInteractionTime.startTimer(),this.browserInteractionTime.addTimeIntervalEllapsedCallback({callback:e=>this._sendDwellEvent(this._eventData,this._searchSessionId,e,!1),timeInMilliseconds:this._timing.initialPollInterval,multiplier:this._timing.multiplierCallback}),"undefined"!=typeof window&&window.addEventListener("beforeunload",this._onBeforeUnload)}),(0,s.default)(this,"stop",()=>{this.browserInteractionTime.isRunning()&&this._sendDwellEvent(this._eventData,this._searchSessionId,this.browserInteractionTime.getTimeInMilliseconds(),!0),this.browserInteractionTime.stopTimer()}),(0,s.default)(this,"newPage",(e,t)=>{(0,n("49KuO").validateDwellBaseEvent)(e),this.stop(),this.browserInteractionTime.reset(),this.setEventData(e),this.setSearchSessionId(t),this.start()}),(0,s.default)(this,"setEventData",e=>{this._eventData=e}),(0,s.default)(this,"getEventData",()=>this._eventData),(0,s.default)(this,"setSearchSessionId",e=>{this._searchSessionId=e}),(0,s.default)(this,"getSearchSessionId",()=>this._searchSessionId),(0,s.default)(this,"destroy",()=>{this.browserInteractionTime.destroy(),"undefined"!=typeof window&&window.removeEventListener("beforeunload",this._onBeforeUnload)}),(0,s.default)(this,"_onBeforeUnload",()=>{this.stop(),this.destroy()}),(0,s.default)(this,"_sendDwellEvent",(e,t,r,s)=>{this._trackCallback({action:"dwelled",actionSubject:e.actionSubject,actionSubjectId:e.actionSubjectId,source:e.source,containerType:e.containerType,containerId:e.containerId,objectType:e.objectType,objectId:e.objectId,attributes:o(o({},{dwellTime:r,searchReferrer:t,finalDwellEvent:s}),e.attributes),tags:e.tags})}),!e)throw Error("trackCallback is required for DwellTimeHelper");(0,n("49KuO").validateDwellBaseEvent)(t),this._trackCallback=e,this._eventData=t,this._searchSessionId=r,this._timing=o(o({},l),a),this.browserInteractionTime=new i.default({idleTimeoutMs:this._timing.idleTimeout,checkCallbacksIntervalMs:500})}}}),a("hM7RE",function(t,r){e(t.exports,"default",()=>s);var s=e=>t=>r=>{let s=r(t),i=s.clone();return i&&i.fire(e),s}}),a("70wqP",function(r,s){e(r.exports,"default",()=>a);var i=n("eUqFw");class a extends i.Component{constructor(e){super(e),this.state={hasError:!1}}componentDidCatch(e,t){let{onError:r}=this.props;r&&r(e,t),this.setState({hasError:!0})}render(){let{data:e,children:r,ErrorComponent:s}=this.props,{hasError:a}=this.state;return a?s?t(i).createElement(n("8PMUi").default,{data:e},t(i).createElement(s,null)):null:t(i).createElement(n("8PMUi").default,{data:e},r)}}}),a("co43T",function(t,r){e(t.exports,"useCallbackWithAnalytics",()=>i);var s=n("eUqFw");let i=(e,t,r)=>{let{createAnalyticsEvent:i}=(0,n("bFzGY").useAnalyticsEvents)(),a=(0,n("gNgZO").useTrackedRef)(e),o=(0,n("gNgZO").useTrackedRef)(t);return(0,s.useCallback)((...e)=>{let t="function"==typeof o.current?o.current(...e):o.current;i(t).fire(r),a.current(...e)},[i,a,o,r])}}),a("5HTho",function(r,s){e(r.exports,"default",()=>u);var i=n("5zQU9"),a=n("6rgVQ");function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){(0,i.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let c={initialPollInterval:5,pollBackoffRate:2,idleTimeout:30};class u{constructor(e,r,s,o){if((0,i.default)(this,"timeMeInitialized",!1),(0,i.default)(this,"start",()=>{if(this.timeMeInitialized)throw Error("DwellTimeHelper should only be initialised once per page load.");this.timeMeInitialized=!0,this._initDwellTimeCounterAndPolling(),"undefined"!=typeof window&&window.addEventListener("beforeunload",()=>{this.stop()})}),(0,i.default)(this,"stop",()=>{t(a).isUserCurrentlyOnPage&&this._sendDwellEvent(this._eventData,this._searchSessionId,!0),t(a).stopAllTimers(),t(a).resetAllRecordedPageTimes(),t(a).timeElapsedCallbacks=[],this.timeMeInitialized=!1}),(0,i.default)(this,"newPage",(e,t)=>{(0,n("49KuO").validateDwellBaseEvent)(e),this.stop(),this._eventData=e,this._searchSessionId=t,this._initDwellTimeCounterAndPolling()}),(0,i.default)(this,"_initDwellTimeCounterAndPolling",()=>{t(a).initialize({idleTimeoutInSeconds:this._timing.idleTimeout}),this._pollDwellTime(this._timing.initialPollInterval,this._searchSessionId,this._eventData)}),(0,i.default)(this,"_pollDwellTime",(e,r,s)=>{t(a).callAfterTimeElapsedInSeconds(e,()=>{this._sendDwellEvent(s,r,!1),this._pollDwellTime(e*this._timing.pollBackoffRate,r,s)})}),(0,i.default)(this,"_sendDwellEvent",(e,r,s)=>{let i={dwellTime:t(a).getTimeOnCurrentPageInMilliseconds(),searchReferrer:r,finalDwellEvent:s};this._trackCallback({action:"dwelled",actionSubject:e.actionSubject,actionSubjectId:e.actionSubjectId,source:e.source,containerType:e.containerType,containerId:e.containerId,containers:e.containers,objectType:e.objectType,objectId:e.objectId,attributes:l(l({},i),e.attributes),tags:e.tags})}),!e)throw Error("trackCallback is required for DwellTimeHelper");(0,n("49KuO").validateDwellBaseEvent)(r),this._trackCallback=e,this._eventData=r,this._searchSessionId=s,this._timing=l(l({},c),o)}}}),r.rlb("2Lfdl");try{performance.mark("shared~vendor~atlassian~ar.js:eval-stop")}catch(e){}
//# sourceMappingURL=https://statlas.prod.atl-paas.net/jira-frontend-parcel-source-maps/assets/shared~vendor~atlassian~ar.1d9c8aef.js.map
